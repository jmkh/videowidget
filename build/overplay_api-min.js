!function t(e,i,r){function n(o,s){if(!i[o]){if(!e[o]){var c="function"==typeof require&&require;if(!s&&c)return c(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}var d=i[o]={exports:{}};e[o][0].call(d.exports,function(t){var i=e[o][1][t];return n(i||t)},d,d.exports,t,e,i,r)}return i[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)n(r[o]);return n}({1:[function(t,e,i){"use strict";function r(){var t=window.location!=window.parent.location?document.referrer:document.location.href;return new URL(t).hostname}function n(t){var e=t.getBoundingClientRect(),i=document.body,r=document.documentElement,n=window.pageYOffset||r.scrollTop||i.scrollTop,a=window.pageXOffset||r.scrollLeft||i.scrollLeft,o=r.clientTop||i.clientTop||0,s=r.clientLeft||i.clientLeft||0,c=e.top+n-o,d=e.left+a-s;return{top:Math.round(c),left:Math.round(d)}}function a(t){for(var e=0,i=0;t;)e+=parseFloat(t.offsetTop),i+=parseFloat(t.offsetLeft),t=t.offsetParent;return{top:Math.round(e),left:Math.round(i)}}function o(t){return t.getBoundingClientRect?n(t):a(t)}function s(t){function e(t){if(t<=0)return void i.destructor();t--,i.span.innerHTML="Реклама... осталось "+t+" sek",setTimeout(function(){e(t)},1e3)}var i=this;this.WrapperDiv=null,this.config=null,this.frame=null,this.container=t,this.index=null,this.clickedFlag=0,this.readyFlag=0,this.pos=o(t),this.size={width:t.scrollWidth,height:t.scrollHeight},this.destructor=function(){i.WrapperDiv&&(document.body.removeChild(i.WrapperDiv),i.WrapperDiv=null),i.callback()},this.WrapperDiv=document.createElement("div"),this.WrapperDiv.className="mp-wrapper",this.WrapperDiv.style.position="absolute",this.WrapperDiv.style.zIndex=1e4,this.WrapperDiv.style.cursor="pointer",this.WrapperDiv.style.opacity=0,this.WrapperDiv.style.filter="alpha(Opacity=0)",this.WrapperDiv.style.cursor="pointer",this.WrapperDiv.style.background="#000000 url('//apptoday.ru/autogit/autostop/img/yt-loader.gif') 50% 50% no-repeat",this.WrapperDiv.style.textAlign="center",this.WrapperDiv.style.color="#ffffff",this.span=document.createElement("span"),this.span.innerHTML="Реклама...",this.span.style.marginTop="10%",this.span.style.display="inline-block",this.WrapperDiv.appendChild(this.span),this.render(),document.body.appendChild(this.WrapperDiv),window.addEventListener("resize",function(){i.render()},!1),window.addEventListener("scroll",function(t){i.render()},!1),this.WrapperDiv.onclick=function(){i.clickedFlag||(i.clickedFlag=1,i.WrapperDiv.style.opacity=1,i.WrapperDiv.style.filter="alpha(Opacity=100)",e(20),i.getReady())},this.bridge=new l,this.index=this.bridge.index,this.bridge.addAction("die",function(t){i.destructor()}),this.bridge.addAction("ready",function(t){i.readyFlag||(i.readyFlag=1,i.WrapperDiv.style.background="",i.WrapperDiv.style.opacity=1,i.WrapperDiv.style.filter="alpha(Opacity=100)",i.span.style.display="none",h("execute",{index:i.index,config:i.config},i.frame.contentWindow))})}function c(t){var e=this;this.containers=[],this.wrappers=[],this.selector=t.selector||"video",this.callback=t.callback||function(){},this.getContainers(this.selector);var i=r();new d({auth:{affiliate_id:t.affiliate_id,pid:t.pid,host:i},successFn:function(t){e.config=t;for(var i=0,r=e.wrappers.length;i<r;i++)e.wrappers[i].setConfig(t)}})}var d=t("./configurator"),p=t("./iFrameBridge"),l=p.Bridge,h=p.callAction;s.prototype.getReady=function(){this.config&&this.index&&this.insertFrame()},s.prototype.setConfig=function(t){this.config=t,this.getReady()},s.prototype.insertFrame=function(){if(!this.frame){var t={width:this.container.scrollWidth,height:this.container.scrollHeight};this.frame=document.createElement("iframe"),this.frame.height=t.height,this.frame.width=t.width,this.frame.scrolling="no",this.frame.style.border="0",this.frame.style.margin="0",this.frame.src="//dev.apptoday.ru/overgit/desctop.html?index="+this.index,this.WrapperDiv.appendChild(this.frame)}},s.prototype.render=function(){var t=o(this.container),e={width:this.container.scrollWidth,height:this.container.scrollHeight};this.WrapperDiv.style.width=e.width+"px"||"200px",this.WrapperDiv.style.height=e.height+"px"||"200px",this.WrapperDiv.style.backgroundSize="50px",this.WrapperDiv.style.top=t.top+"px",this.WrapperDiv.style.left=t.left+"px"},c.prototype.getContainers=function(t){t=t||this.selector;var e=Array.from(document.querySelectorAll(t));this.containers=this.containers.concat(e);for(var i=0,r=this.containers.length;i<r;i++){var n=new s(this.containers[i]);n.callback=this.callback,this.wrappers.push(n)}},e.exports=c},{"./configurator":2,"./iFrameBridge":4}],2:[function(t,e,i){"use strict";function r(){var t=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(navigator.platform)for(;t.length;)if(navigator.platform===t.pop())return!0;return!1}function n(t){var e={size:{width:"350",height:"400"},container:"#mp-video-widget-container-56015401b3da9-20",auth:{affiliate_id:"56015401b3da9",pid:"20"},errorFn:function(){},successFn:function(t){console.log(t)}},i=e;for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);var o=this;this.loaded=!1,this.configUrl="https://widget.market-place.su/videoopt/"+i.auth.affiliate_id+"_"+i.auth.pid+"_"+i.auth.host+".json?p="+Math.random(),console.log(["domc",this.configUrl]);var s=t.errorFn||function(){};t.successFn;a.ajax(this.configUrl,{errorFn:s,successFn:function(t){try{var e=JSON.parse(t);if(void 0!==e.error)throw new Error("Виджет удалён.");for(var n in e)e.hasOwnProperty(n)&&(o[n]=e[n]);var s=/Android|Silk|Mobile|PlayBook/.test(window.navigator.userAgent),c=r();switch(o.isDesktop=!s,!0){case c:o.ads=e["ads-mobile"].iOS;break;case s:o.ads=e["ads-mobile"].Android}a.ajax("https://widget.market-place.su/proxy_referer/",{errorFn:function(){},successFn:function(t){try{var r=JSON.parse(t);o.loaded=!0,o.referer=r,i.successFn(o),window.parent.postMessage(e,"*")}catch(t){console.log("битая конфигурация",t)}}})}catch(t){console.log("битая конфигурация",t)}}})}var a=t("./httpclient");e.exports=n},{"./httpclient":3}],3:[function(t,e,i){"use strict";var r={ajax:function(t,e){var i=t;e=e||{};var r=e.errorFn||function(){},n=e.successFn||function(){},a=e.type||"GET",o=e.data||{},s=JSON.stringify(o);if(a=a.toUpperCase(),window.XMLHttpRequest)var c=new XMLHttpRequest;else var c=new ActiveXObject("Microsoft.XMLHTTP");if("GET"==a){s=null,i.indexOf("?")<0&&(i+="?1=1");for(var d in o)o.hasOwnProperty(d)&&(i+="&"+d+"="+o[d])}c.open(a,i,!0),c.onreadystatechange=function(){4==c.readyState?200==c.status?n({response:c.responseText}):r({status:c.status}):r({status:c.readyState})},c.onreadystatechange=function(){4==c.readyState&&(200==c.status?n(c.responseText):r({status:c.status}))};try{c.withCredentials=e.withCredentials||!1,c.send(s)}catch(t){}}};e.exports=r},{}],4:[function(t,e,i){"use strict";function r(t){var t=t||a();return void 0===window.MpFrameBridges&&(window.MpFrameBridges={}),void 0!==window.MpFrameBridges[t]?window.MpFrameBridges[t]:(window.MpFrameBridges[t]=new o(t),window.MpFrameBridges[t])}function n(t,e,i){i.postMessage({name:t,data:e,bridgeAction:!0},"*")}function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})}function o(t){this.index=t||a();var e={default:function(){}};this.execAction=function(t,i){(e[t]||e.default||function(){}).call(this,i)},this.addAction=function(t,i){e[t]=i},this.showActions=function(){console.log(e)}}window.makeBridge=r,window.mp_bridge_listener=function(t){if("object"==typeof t.data&&void 0!==t.data.bridgeAction&&1==t.data.bridgeAction){if("broadcast"==t.data.data.index&&void 0!==window.MpFrameBridges)for(var e in window.MpFrameBridges)window.MpFrameBridges.hasOwnProperty(e)&&window.MpFrameBridges[e].execAction(t.data.name,t.data.data);r(t.data.data.index).execAction(t.data.name,t.data.data)}},void 0===window.MpBridgeListenerAttached&&(window.addEventListener?window.addEventListener("message",mp_bridge_listener):window.attachEvent("onmessage",mp_bridge_listener),window.MpBridgeListenerAttached=!0),e.exports={Bridge:r,callAction:n}},{}],5:[function(t,e,i){"use strict";var r=t("./../models_1/Overlay");if(mPwConfig.hasOwnProperty("affiliate_id")){new r(mPwConfig)}},{"./../models_1/Overlay":1}]},{},[5]);