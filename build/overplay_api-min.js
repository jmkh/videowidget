!function t(e,i,r){function n(o,s){if(!i[o]){if(!e[o]){var d="function"==typeof require&&require;if(!s&&d)return d(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}var c=i[o]={exports:{}};e[o][0].call(c.exports,function(t){var i=e[o][1][t];return n(i||t)},c,c.exports,t,e,i,r)}return i[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)n(r[o]);return n}({1:[function(t,e,i){"use strict";function r(){return/(android)/i.test(navigator.userAgent)}function n(){var t=window.location!=window.parent.location?document.referrer:document.location.href,e=t.match(/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i);return e&&e[1]}function a(t){switch(document.characterSet.toLowerCase()){case"utf-8":return"Реклама... осталось "+t+" с";default:return"Ad... remained "+t+" s"}}function o(t){var e=t.getBoundingClientRect(),i=document.body,r=document.documentElement,n=window.pageYOffset||r.scrollTop||i.scrollTop,a=window.pageXOffset||r.scrollLeft||i.scrollLeft,o=r.clientTop||i.clientTop||0,s=r.clientLeft||i.clientLeft||0,d=e.top+n-o,c=e.left+a-s;return{top:Math.round(d),left:Math.round(c)}}function s(t){for(var e=0,i=0;t;)e+=parseFloat(t.offsetTop),i+=parseFloat(t.offsetLeft),t=t.offsetParent;return{top:Math.round(e),left:Math.round(i)}}function d(t){return t.getBoundingClientRect?o(t):s(t)}function c(t){function e(t){if(!i.desctopStartFlag){if(t<=0)return void i.destructor();t--,i.span.innerHTML=a(t),setTimeout(function(){e(t)},1e3)}}var i=this;this.WrapperDiv=null,this.config=null,this.frame=null,this.container=t,this.index=null,this.clickedFlag=0,this.readyFlag=0,this.desctopFlag=0,this.desctopStartFlag=0,this.pos=d(t),this.size={width:t.offsetWidth,height:t.offsetHeight},this.destructor=function(){i.WrapperDiv&&(document.body.removeChild(i.WrapperDiv),i.WrapperDiv=null),i.callback()},this.WrapperDiv=document.createElement("div"),this.WrapperDiv.className="mp-wrapper",this.WrapperDiv.style.position="absolute",this.WrapperDiv.style.zIndex=9999999,this.WrapperDiv.style.cursor="pointer",this.WrapperDiv.style.opacity=0,this.WrapperDiv.style.filter="alpha(Opacity=0)",this.WrapperDiv.style.cursor="pointer",this.WrapperDiv.style.background="#000000 url('//apptoday.ru/autogit/autostop/img/yt-loader.gif') 50% 50% no-repeat",this.WrapperDiv.style.textAlign="center",this.WrapperDiv.style.color="#ffffff",this.span=document.createElement("span"),this.span.innerHTML="Реклама...",this.span.style.marginTop="10%",this.span.style.display="inline-block",this.WrapperDiv.appendChild(this.span),this.render(),document.body.appendChild(this.WrapperDiv),window.addEventListener("resize",function(){i.render()},!1),setTimeout(function(){i.render()},1500),window.addEventListener("scroll",function(t){i.render()},!1),this.WrapperDiv.onclick=function(){i.clickedFlag||(i.clickedFlag=1,i.WrapperDiv.style.opacity=1,i.WrapperDiv.style.filter="alpha(Opacity=100)",e(30),i.getReady())},this.bridge=new h,this.index=this.bridge.index,this.bridge.addAction("die",function(t){i.destructor()}),this.bridge.addAction("ready",function(t){i.readyFlag||(i.readyFlag=1,r()?(i.WrapperDiv.style.background="",i.WrapperDiv.style.opacity=1,i.WrapperDiv.style.filter="alpha(Opacity=100)",i.span.style.display="none",u("execute",{index:i.index,config:i.config},i.frame.contentWindow)):(i.desctopFlag=1,i.getReady()))})}function p(t){var e=this;this.containers=[],this.wrappers=[],this.selector=t.selector||"video",this.callback=t.callback||function(){},this.getContainers(this.selector);var i=n();new l({auth:{affiliate_id:t.affiliate_id,pid:t.pid,host:i},successFn:function(t){e.config=t;for(var i=0,r=e.wrappers.length;i<r;i++)e.wrappers[i].setConfig(t)}})}var l=t("./configurator"),f=t("./iFrameBridge"),h=f.Bridge,u=f.callAction;c.prototype.getReady=function(){this.config&&this.index&&(this.insertFrame(),this.readyFlag&&this.clickedFlag&&this.desctopFlag&&this.setDesctopExecute())},c.prototype.setDesctopExecute=function(){if(1==this.desctopFlag){var t=this;this.desctopFlag=2,this.bridge.addAction("startPlay",function(e){t.desctopStartFlag||(t.desctopStartFlag=1,t.WrapperDiv.style.background="",t.WrapperDiv.style.opacity=1,t.WrapperDiv.style.display="block",t.frame.style.display="block",t.WrapperDiv.style.filter="alpha(Opacity=100)",t.span.style.display="none")}),u("execute",{index:this.index,config:this.config},this.frame.contentWindow)}},c.prototype.setConfig=function(t){this.config=t,this.getReady()},c.prototype.insertFrame=function(){if(!this.frame){this.container.scrollWidth,this.container.scrollHeight;this.frame=document.createElement("iframe"),this.frame.height="100%",this.frame.width="100%",this.frame.scrolling="no",this.frame.style.border="0",this.frame.style.margin="0",r()?this.frame.src="//i-trailer.ru/player/html5/osipov/android.html?index="+this.index:(this.frame.style.display="none",this.frame.src="//i-trailer.ru/player/html5/osipov/desctop.html?index="+this.index),this.WrapperDiv.appendChild(this.frame)}},c.prototype.render=function(){if(this.WrapperDiv){var t=d(this.container),e={width:this.container.offsetWidth,height:this.container.offsetHeight};this.WrapperDiv.style.width=e.width+"px"||"200px",this.WrapperDiv.style.height=e.height+"px"||"200px",this.WrapperDiv.style.backgroundSize="50px",this.WrapperDiv.style.top=t.top+"px",this.WrapperDiv.style.left=t.left+"px"}},p.prototype.getContainers=function(t){t=t||this.selector,this.containers=document.querySelectorAll(t);for(var e=0,i=this.containers.length;e<i;e++){var r=new c(this.containers[e]);r.callback=this.callback,this.wrappers.push(r)}},e.exports=p},{"./configurator":2,"./iFrameBridge":4}],2:[function(t,e,i){"use strict";function r(){var t=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(navigator.platform)for(;t.length;)if(navigator.platform===t.pop())return!0;return!1}function n(t){var e={size:{width:"350",height:"400"},container:"#mp-video-widget-container-56015401b3da9-20",auth:{affiliate_id:"56015401b3da9",pid:"20"},errorFn:function(){},successFn:function(t){}},i=e;for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);var s=this;this.loaded=!1;var d=i.auth.host.replace(/^www\./,"");this.configUrl="https://widget.market-place.su/videoopt/"+i.auth.affiliate_id+"_"+i.auth.pid+"_"+d+".json?p="+Math.random();var c=t.errorFn||function(){};t.successFn;o.ajax(this.configUrl,{errorFn:c,successFn:function(t){try{var e=JSON.parse(t);if(void 0!==e.error)throw new Error("Виджет удалён.");for(var n in e)e.hasOwnProperty(n)&&(s[n]=e[n]);var a=/Android|Silk|Mobile|PlayBook/.test(window.navigator.userAgent),d=r();switch(s.isDesktop=!a,!0){case d:s.ads=e["ads-mobile"].iOS;break;case a:s.ads=e["ads-mobile"].Android}o.ajax("https://widget.market-place.su/proxy_referer/",{errorFn:function(){},successFn:function(t){try{var r=JSON.parse(t);s.loaded=!0,s.referer=r,i.successFn(s),window.parent.postMessage(e,"*")}catch(t){console.log("битая конфигурация",t)}}})}catch(t){console.log("битая конфигурация",t)}}}),a(i)}function a(t){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}),i={key:e,fromUrl:encodeURIComponent(""),pid:t.auth.pid,affiliate_id:t.auth.affiliate_id,cookie_id:0,id_src:0,event:"loadWidget",mess:""},r="https://api.market-place.su/Product/video/l1stat.php?p="+Math.random()+"&data="+encodeURIComponent(JSON.stringify(i));new Image(1,1).src=r}var o=t("./httpclient");e.exports=n},{"./httpclient":3}],3:[function(t,e,i){"use strict";var r={ajax:function(t,e){var i=t;e=e||{};var r=e.errorFn||function(){},n=e.successFn||function(){},a=e.type||"GET",o=e.data||{},s=JSON.stringify(o);if(a=a.toUpperCase(),window.XMLHttpRequest)var d=new XMLHttpRequest;else var d=new ActiveXObject("Microsoft.XMLHTTP");if("GET"==a){s=null,i.indexOf("?")<0&&(i+="?1=1");for(var c in o)o.hasOwnProperty(c)&&(i+="&"+c+"="+o[c])}d.open(a,i,!0),d.onreadystatechange=function(){4==d.readyState?200==d.status?n({response:d.responseText}):r({status:d.status}):r({status:d.readyState})},d.onreadystatechange=function(){4==d.readyState&&(200==d.status?n(d.responseText):r({status:d.status}))};try{d.withCredentials=e.withCredentials||!1,d.send(s)}catch(t){}}};e.exports=r},{}],4:[function(t,e,i){"use strict";function r(t){var t=t||a();return void 0===window.MpFrameBridges&&(window.MpFrameBridges={}),void 0!==window.MpFrameBridges[t]?window.MpFrameBridges[t]:(window.MpFrameBridges[t]=new o(t),window.MpFrameBridges[t])}function n(t,e,i){i.postMessage({name:t,data:e,bridgeAction:!0},"*")}function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})}function o(t){this.index=t||a();var e={default:function(){}};this.execAction=function(t,i){(e[t]||e.default||function(){}).call(this,i)},this.addAction=function(t,i){e[t]=i},this.showActions=function(){console.log(e)}}window.makeBridge=r,window.mp_bridge_listener=function(t){if("object"==typeof t.data&&void 0!==t.data.bridgeAction&&1==t.data.bridgeAction){if("broadcast"==t.data.data.index&&void 0!==window.MpFrameBridges)for(var e in window.MpFrameBridges)window.MpFrameBridges.hasOwnProperty(e)&&window.MpFrameBridges[e].execAction(t.data.name,t.data.data);r(t.data.data.index).execAction(t.data.name,t.data.data)}},void 0===window.MpBridgeListenerAttached&&(window.addEventListener?window.addEventListener("message",mp_bridge_listener):window.attachEvent("onmessage",mp_bridge_listener),window.MpBridgeListenerAttached=!0),e.exports={Bridge:r,callAction:n}},{}],5:[function(t,e,i){"use strict";var r=t("./../models_1/Overlay");if("undefined"!=typeof mPwConfig&&mPwConfig.hasOwnProperty("affiliate_id")){new r(mPwConfig)}window.CreateOverplayWidget=function(t){new r(t)}},{"./../models_1/Overlay":1}]},{},[5]);