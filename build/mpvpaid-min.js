!function e(t,i,a){function r(d,o){if(!i[d]){if(!t[d]){var s="function"==typeof require&&require;if(!o&&s)return s(d,!0);if(n)return n(d,!0);throw new Error("Cannot find module '"+d+"'")}var p=i[d]={exports:{}};t[d][0].call(p.exports,function(e){var i=t[d][1][e];return r(i||e)},p,p.exports,e,t,i,a)}return i[d].exports}for(var n="function"==typeof require&&require,d=0;d<a.length;d++)r(a[d]);return r}({1:[function(e,t,i){"use strict";function a(e,t){this.type=e,this.data=t}a.convertToVAST=function(e){return{AdLoaded:VideoEvent.AD_READY,AdVolumeChange:VideoEvent.AD_VOLUME_CHANGE,AdError:VideoEvent.AD_ERROR,AdStarted:VideoEvent.AD_START,AdImpression:VideoEvent.AD_IMPRESSION,AdStopped:VideoEvent.AD_STOP,AdPaused:VideoEvent.AD_PAUSE,AdPlaying:VideoEvent.AD_RESUME,AdVideoStart:VideoEvent.VIDEO_START,AdVideoFirstQuartile:VideoEvent.VIDEO_FIRST_QUARTILE,AdVideoMidpoint:VideoEvent.VIDEO_MIDPOINT,AdVideoThirdQuartile:VideoEvent.VIDEO_THIRD_QUARTILE,AdVideoComplete:VideoEvent.VIDEO_COMPLETE,AdUserClose:VideoEvent.USER_CLOSE,AdSkipped:VideoEvent.USER_SKIP,AdUserAcceptInvitation:VideoEvent.USER_ACCEPT_INVENTATION,AdInteraction:VideoEvent.USER_INTERACTION,AdClickThru:VideoEvent.USER_CLICK}[e]||""},a.convertFromVAST=function(e){return{ready:a.AdLoaded,volumeChange:a.AdVolumeChange,error:a.AdError,creativeView:a.AdStarted,impression:a.AdImpression,stop:a.AdStopped,pause:a.AdPaused,resume:a.AdPlaying,start:a.AdVideoStart,firstQuartile:a.AdVideoFirstQuartile,midpoint:a.AdVideoMidpoint,thirdQuartile:a.AdVideoThirdQuartile,complete:a.AdVideoComplete,closeLinear:a.AdUserClose,skip:a.AdSkipped,acceptInvitation:a.AdUserAcceptInvitation,interaction:a.AdInteraction,click:a.AdClickThru}[e]||""},a.AdLoaded="AdLoaded",a.AdStarted="AdStarted",a.AdStopped="AdStopped",a.AdSkipped="AdSkipped",a.AdLinearChange="AdLinearChange",a.AdSizeChange="AdSizeChange",a.AdExpandedChange="AdExpandedChange",a.AdSkippableStateChange="AdSkippableStateChange",a.AdRemainingTimeChange="AdRemainingTimeChange",a.AdDurationChange="AdDurationChange",a.AdVolumeChange="AdVolumeChange",a.AdImpression="AdImpression",a.AdVideoStart="AdVideoStart",a.AdVideoFirstQuartile="AdVideoFirstQuartile",a.AdVideoMidpoint="AdVideoMidpoint",a.AdVideoThirdQuartile="AdVideoThirdQuartile",a.AdVideoComplete="AdVideoComplete",a.AdClickThru="AdClickThru",a.AdInteraction="AdInteraction",a.AdUserAcceptInvitation="AdUserAcceptInvitation",a.AdUserMinimize="AdUserMinimize",a.AdUserClose="AdUserClose",a.AdPaused="AdPaused",a.AdPlaying="AdPlaying",a.AdLog="AdLog",a.AdError="AdError",t.exports=a},{}],2:[function(e,t,i){"use strict";function a(e){(this.subscribers[e.type]||[]).forEach(function(t){t.fn.call(t.ctx,e.data)})}function r(e){e.data=e.data||{};var t={};e.type==o.AD_ERROR&&(t.ERRORCODE=e.data.code),e.type!==o.AD_STOP?a.call(this,new d(d.convertFromVAST(e.type),e.data)):(this.parameters.slot.parentNode.removeChild(this.parameters.slot),a.call(this,new d(d.convertFromVAST(e.type),null)))}function n(){this.subscribers={},this.parameters={version:"2.0"},this.flags={}}var d=e("./VPAIDEvent"),o=e("./VideoEvent"),s=e("./iFrameBridge");window.Bridge=s.Bridge,window.CallAction=s.callAction;var p=function e(){this.playedCnt=0,this.flags={canSendEvent:!0,middleEvent:[!1,!1,!1,!1,!1]};var t=this;this.bridge=new Bridge,this.index=this.bridge.index,this.bridge.addAction("adEvent",function(i){if(i.hasOwnProperty("eventName"))switch(i.eventName){case"firstQuartile":t.playedCnt++,e.$dispatchEvent.call(t,i.eventName,t.getMetaData());break;case"MyVastEnded":t.playedCnt?t.stop():e.$dispatchEvent.call(t,o.AD_ERROR,{data:"нет роликов"});break;case"mute":e.$dispatchEvent.call(t,o.AD_MUTE,t.getMetaData());break;case"complete":case"error":break;default:d.convertFromVAST(i.eventName);e.$dispatchEvent.call(t,i.eventName,t.getMetaData())}})};p.prototype.init=function(e,t,i){this.flags.inited||(this.flags.inited=!0,this.parent={dispatcher:t,context:i})},p.prototype.getMetaData=function(){return{}},p.prototype.stop=function(){p.$dispatchEvent.call(this,o.AD_STOP,this.getMetaData())},p.prototype.play=function(){if(!this.flags.started&&!this.flags.stopped){this.flags.started=!0;var e=document.createElement("style"),t=document.createElement("iframe");t.style.width="100%",t.style.height="100%",t.style.display="block",t.style.border="none",t.scrolling="no",e.innerHTML=" video{display:none !important} ";var i=window.parent.document.referrer,a=new URL(i).hostname;t.src="//apptoday.ru/dev/vast.html?index="+this.index+"&affiliate_id="+this.parent.context.parameters.affiliate_id+"&pid="+this.parent.context.parameters.pid+"&width="+this.parent.context.parameters.size.width+"&height="+this.parent.context.parameters.size.height+"&site="+a,p.$dispatchEvent.call(this,o.AD_START,this.getMetaData()),p.$dispatchEvent.call(this,o.AD_IMPRESSION,this.getMetaData()),this.parent.context.parameters.slot.appendChild(e),this.parent.context.parameters.slot.appendChild(t)}},p.$dispatchEvent=function(e,t){this.flags.canSendEvent&&this.parent.dispatcher.call(this.parent.context,new o(e,t,this)),this.flags.canSendEvent=!0},n.prototype.handshakeVersion=function(){return this.parameters.version},n.prototype.initAd=function(e,t,i,n,o,s){if(!this.flags.inited){this.flags.inited=!0;var c=JSON.parse(o.AdParameters||"{}");if(!c.hasOwnProperty("affiliate_id"))return a.call(this,new d(d.AdError,'Missing mandatory parameters "affiliate_id" in AdParameters'));var A=c.affiliate_id;if(!c.hasOwnProperty("pid"))return a.call(this,new d(d.AdError,'Missing mandatory parameters "pid" in AdParameters'));var l=c.pid;this.parameters.size={width:e,height:t},this.parameters.pid=l,this.parameters.affiliate_id=A,this.parameters.bitrate=n,this.parameters.adParameters=c,this.parameters.creativeData=o,this.parameters.slot=s.slot,this.mediaPlayer=new p,this.mediaPlayer.init({mediapath:"",xmlLoader:""},r,this),a.call(this,new d(d.AdLoaded,{}))}},n.prototype.startAd=function(){this.flags.started||(this.flags.started=!0,this.mediaPlayer.play())},n.prototype.stopAd=function(){this.flags.stopped||(this.flags.stopped=!0)},n.prototype.skipAd=function(){this.flags.stopped||(this.flags.stopped=!0)},n.prototype.resizeAd=function(e,t){!this.flags.stopped&&this.flags.inited&&(this.parameters.slot.style.width=e+"px",this.parameters.slot.style.height=t+"px")},n.prototype.pauseAd=function(){!this.flags.stopped&&this.flags.started},n.prototype.resumeAd=function(){!this.flags.stopped&&this.flags.started},n.prototype.expandAd=function(){console.log("AdLog",'The method "expandAd" is not implemented')},n.prototype.collapseAd=function(){console.log("AdLog",'The method "collapseAd" is not implemented')},n.prototype.setAdVolume=function(e){!this.flags.stopped&&this.flags.started},n.prototype.getAdVolume=function(){},n.prototype.getAdDuration=function(){},n.prototype.getAdLinear=function(){return!0},n.prototype.getAdWidth=function(){return this.parameters.width},n.prototype.getAdHeight=function(){return this.parameters.height},n.prototype.getAdRemainingTime=function(){var e=this.mediaPlayer.getMetaData();return e.duration-e.currentTime},n.prototype.getAdExpanded=function(){return!1},n.prototype.getAdSkippableState=function(){return this.parameters.skippableState},n.prototype.getAdIcons=function(){return this.parameters.icons},n.prototype.getAdCompanions=function(){return this.parameters.companions},n.prototype.subscribe=function(e,t,i){"string"==typeof t&&(t=[t]);for(var a=0,r=t.length;a<r;a++){var n=t[a];this.subscribers[n]||(this.subscribers[n]=[]),this.subscribers[n].push({fn:e,ctx:i||null})}},n.prototype.unsubscribe=function(e,t){"string"==typeof t&&(t=[t]);for(var i=t.length;i>=0;i--){var a=this.subscribers[t[i]];if(a&&Array.isArray(a)&&a.length)for(var r=0,n=a.length;r<n;r++)a[r].fn===e&&a.splice(r,1)}},t.exports=n},{"./VPAIDEvent":1,"./VideoEvent":3,"./iFrameBridge":4}],3:[function(e,t,i){"use strict";var a=function(e,t){this.type=e,this.data=t};a.AD_READY="ready",a.AD_VOLUME_CHANGE="volumeChange",a.AD_ERROR="error",a.AD_STOP="stop",a.AD_START="creativeView",a.AD_IMPRESSION="impression",a.AD_MUTE="mute",a.AD_UNMUTE="unmute",a.AD_PAUSE="pause",a.AD_RESUME="resume",a.AD_REWIND="rewind",a.VIDEO_START="start",a.VIDEO_FIRST_QUARTILE="firstQuartile",a.VIDEO_MIDPOINT="midpoint",a.VIDEO_THIRD_QUARTILE="thirdQuartile",a.VIDEO_COMPLETE="complete",a.VIDEO_PROGRESS="progress",a.USER_CLOSE="closeLinear",a.USER_SKIP="skip",a.USER_ACCEPT_INVENTATION="acceptInvitation",a.USER_INTERACTION="interaction",a.USER_CLICK="click",t.exports=a},{}],4:[function(e,t,i){"use strict";function a(e){var e=e||n();return void 0===window.MpFrameBridges&&(window.MpFrameBridges={}),void 0!==window.MpFrameBridges[e]?window.MpFrameBridges[e]:(window.MpFrameBridges[e]=new d(e),window.MpFrameBridges[e])}function r(e,t,i){i.postMessage({name:e,data:t,bridgeAction:!0},"*")}function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}function d(e){this.index=e||n();var t={default:function(){}};this.execAction=function(e,i){(t[e]||t.default||function(){}).call(this,i)},this.addAction=function(e,i){t[e]=i},this.showActions=function(){console.log(t)}}window.makeBridge=a,window.mp_bridge_listener=function(e){if("object"==typeof e.data&&void 0!==e.data.bridgeAction&&1==e.data.bridgeAction){if("broadcast"==e.data.data.index&&void 0!==window.MpFrameBridges)for(var t in window.MpFrameBridges)window.MpFrameBridges.hasOwnProperty(t)&&window.MpFrameBridges[t].execAction(e.data.name,e.data.data);a(e.data.data.index).execAction(e.data.name,e.data.data)}},void 0===window.MpBridgeListenerAttached&&(window.addEventListener?window.addEventListener("message",mp_bridge_listener):window.attachEvent("onmessage",mp_bridge_listener),window.MpBridgeListenerAttached=!0),t.exports={Bridge:a,callAction:r}},{}],5:[function(e,t,i){"use strict";var a=e("./../models_1/VPAIDInterface");window.getVPAIDAd=function(){return new a}},{"./../models_1/VPAIDInterface":2}]},{},[5]);