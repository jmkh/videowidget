!function e(t,i,n){function r(a,s){if(!i[a]){if(!t[a]){var d="function"==typeof require&&require;if(!s&&d)return d(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=i[a]={exports:{}};t[a][0].call(c.exports,function(e){var i=t[a][1][e];return r(i||e)},c,c.exports,e,t,i,n)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(e,t,i){"use strict";function n(){return void 0!==window.testKorobok||/(android)/i.test(navigator.userAgent)}function r(e){var t=e.getBoundingClientRect(),i=document.body,n=document.documentElement,r=window.pageYOffset||n.scrollTop||i.scrollTop,o=window.pageXOffset||n.scrollLeft||i.scrollLeft,a=n.clientTop||i.clientTop||0,s=n.clientLeft||i.clientLeft||0,d=t.top+r-a,c=t.left+o-s;return{top:Math.round(d),left:Math.round(c)}}function o(e){for(var t=0,i=0;e;)t+=parseFloat(e.offsetTop),i+=parseFloat(e.offsetLeft),e=e.offsetParent;return{top:Math.round(t),left:Math.round(i)}}function a(e){return e.getBoundingClientRect?r(e):o(e)}function s(e){function t(){return i.frame=document.createElement("iframe"),i.frame.height=i.size.height,i.frame.width=i.size.width,i.frame.scrolling="no",i.frame.style.border="0",i.frame.style.margin="0",n()?i.frame.src="//video.apptoday.ru/autogit/autostop/android.html?index="+i.index:(i.frame.style.display="none",i.frame.src="//video.apptoday.ru/autogit/autostop/desctop.html?index="+i.index),void 0!==window.testKorobok&&(i.frame.src+="&testframe=1"),i.WrapperDiv.appendChild(i.frame),i.frame}var i=this;this.WrapperDiv=null,this.config=null,this.container=e,this.pos=a(e),this.bridge=this.Bridge=new f,this.index=this.bridge.index,this.readyFlag=0,this.clickedFlag=0,this.alstartedFlag=0,this.destructor=function(){i.WrapperDiv&&(document.body.removeChild(i.WrapperDiv),i.WrapperDiv=null),i.callback()},this.bridge.addAction("ready",function(e){if(i.readyFlag=1,n()){var t=i.config;t.width=i.size.width,t.height=i.size.height,i.span.style.display="none",i.WrapperDiv.style.background="",i.WrapperDiv.style.opacity=1,u("execute",{index:i.index,config:t},i.frame.contentWindow)}else if(i.clickedFlag&&!i.alstartedFlag){i.span.style.display="none",i.WrapperDiv.style.background="";var t=i.config;t.width=i.size.width,t.height=i.size.height,i.alstartedFlag=1,i.frame.style.display="block",u("execute",{index:i.index,config:t},i.frame.contentWindow)}}),this.bridge.addAction("die",function(e){i.destructor()}),this.size={width:e.scrollWidth,height:e.scrollHeight},this.render=function(e,t){e=e||i.size,t=t||i.pos;var r=document.createElement("div");r.className="mp-wrapper",r.id="mp-wrapper"+i.bridge.index,r.style.width=e.width+"px"||"200px",r.style.height=e.height+"px"||"200px",r.style.position="absolute",r.style.zIndex=1e4,r.style.cursor="pointer",r.style.opacity=0,r.style.textAlign="center",r.style.color="#ffffff",r.style.background="#000000 url('//apptoday.ru/autogit/autostop/img/yt-loader.gif') 50% 50% no-repeat",r.style.backgroundSize="50px",r.style.top=t.top+"px",r.style.left=t.left+"px";var o=document.createElement("span");return o.innerHTML="Реклама...",o.style.marginTop="10%",o.style.display="inline-block",r.appendChild(o),i.span=o,i.WrapperDiv=r,document.body.appendChild(r),n()?i.execute(i):(i.execute(i),r.onclick=function(e){if(r.style.opacity=1,!i.clickedFlag){if(i.clickedFlag=1,i.readyFlag&&!i.alstartedFlag){i.span.style.display="none",i.WrapperDiv.style.background="";var t=i.config;t.width=i.size.width,t.height=i.size.height,i.alstartedFlag=1,i.frame.style.display="block",u("execute",{index:i.index,config:t},i.frame.contentWindow)}window.setTimeout(function(){i.readyFlag||(console.log("не дождался"),i.destructor())},3e3)}}),r},this.execute=function(e){t()},this.render()}function d(e){var t=this;this.containers=[],this.wrappers=[],this.selector=e.selector||"video",this.callback=e.callback||function(){},new c({auth:{affiliate_id:e.affiliate_id,pid:e.pid},successFn:function(e){t.config=e;for(var i=0,n=t.config.ads.length;i<n;i++)31!=t.config.ads[i].id&&32!=t.config.ads[i].id||(window.testKorobok=1);"video"==t.selector?t.getStandartContainers():t.getContainers(),t.makeWrappers()}}),this.wrapperClick=function(e){},this.getContainers=function(e){e=e||t.selector;var i=Array.from(document.querySelectorAll(e));t.containers=t.containers.concat(i)},this.getStandartContainers=function(){for(var e=Array.from(document.querySelectorAll("video")),i=Array.from(document.querySelectorAll("embed")),n=document.querySelectorAll("iframe"),r=[],o=0;o<n.length;o++)n[o].src.indexOf("youtube")>=0&&r.push(n[o]);t.containers=t.containers.concat(e,i,r)},this.makeWrappers=function(){console.log(t.containers,"-------");for(var e=0;e<t.containers.length;e++){var i=t.containers[e],n=new s(i);n.config=t.config,n.callback=t.callback,console.log(n.config),t.wrappers.push(n)}}}var c=e("./configurator"),l=e("./iFrameBridge"),f=l.Bridge,u=l.callAction;t.exports=d},{"./configurator":2,"./iFrameBridge":4}],2:[function(e,t,i){"use strict";function n(){var e=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(navigator.platform)for(;e.length;)if(navigator.platform===e.pop())return!0;return!1}function r(e){var t={size:{width:"350",height:"400"},container:"#mp-video-widget-container-56015401b3da9-20",auth:{affiliate_id:"56015401b3da9",pid:"20"},errorFn:function(){},successFn:function(e){console.log(e)}},i=t;for(var r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);var a=this;this.loaded=!1,this.configUrl="https://widget.market-place.su/videooptions/"+i.auth.affiliate_id+"_"+i.auth.pid+".json?p="+Math.random();var s=e.errorFn||function(){};e.successFn;o.ajax(this.configUrl,{errorFn:s,successFn:function(e){try{var t=JSON.parse(e);if(void 0!==t.error)throw new Error("Виджет удалён.");for(var r in t)t.hasOwnProperty(r)&&(a[r]=t[r]);var s=/Android|Silk|Mobile|PlayBook/.test(window.navigator.userAgent),d=n();switch(a.isDesktop=!s,!0){case d:a.ads=t["ads-mobile"].iOS;break;case s:a.ads=t["ads-mobile"].Android}o.ajax("https://widget.market-place.su/proxy_referer/",{errorFn:function(){},successFn:function(e){try{var n=JSON.parse(e);a.loaded=!0,a.referer=n,i.successFn(a),window.parent.postMessage(t,"*")}catch(e){console.log("битая конфигурация",e)}}})}catch(e){console.log("битая конфигурация",e)}}})}var o=e("./httpclient");t.exports=r},{"./httpclient":3}],3:[function(e,t,i){"use strict";var n={ajax:function(e,t){var i=e;t=t||{};var n=t.errorFn||function(){},r=t.successFn||function(){},o=t.type||"GET",a=t.data||{},s=JSON.stringify(a);if(o=o.toUpperCase(),window.XMLHttpRequest)var d=new XMLHttpRequest;else var d=new ActiveXObject("Microsoft.XMLHTTP");if("GET"==o){s=null,i.indexOf("?")<0&&(i+="?1=1");for(var c in a)a.hasOwnProperty(c)&&(i+="&"+c+"="+a[c])}d.open(o,i,!0),d.onreadystatechange=function(){4==d.readyState?200==d.status?r({response:d.responseText}):n({status:d.status}):n({status:d.readyState})},d.onreadystatechange=function(){4==d.readyState&&(200==d.status?r(d.responseText):n({status:d.status}))};try{d.withCredentials=t.withCredentials||!1,d.send(s)}catch(e){}}};t.exports=n},{}],4:[function(e,t,i){"use strict";function n(e){var e=e||o();return void 0===window.MpFrameBridges&&(window.MpFrameBridges={}),void 0!==window.MpFrameBridges[e]?window.MpFrameBridges[e]:(window.MpFrameBridges[e]=new a(e),window.MpFrameBridges[e])}function r(e,t,i){i.postMessage({name:e,data:t,bridgeAction:!0},"*")}function o(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}function a(e){this.index=e||o();var t={default:function(){}};this.execAction=function(e,i){(t[e]||t.default||function(){}).call(this,i)},this.addAction=function(e,i){t[e]=i},this.showActions=function(){console.log(t)}}window.makeBridge=n,window.mp_bridge_listener=function(e){if("object"==typeof e.data&&void 0!==e.data.bridgeAction&&1==e.data.bridgeAction){if("broadcast"==e.data.data.index&&void 0!==window.MpFrameBridges)for(var t in window.MpFrameBridges)window.MpFrameBridges.hasOwnProperty(t)&&window.MpFrameBridges[t].execAction(e.data.name,e.data.data);n(e.data.data.index).execAction(e.data.name,e.data.data)}},void 0===window.MpBridgeListenerAttached&&(window.addEventListener?window.addEventListener("message",mp_bridge_listener):window.attachEvent("onmessage",mp_bridge_listener),window.MpBridgeListenerAttached=!0),t.exports={Bridge:n,callAction:r}},{}],5:[function(e,t,i){var n=e("./../models/OverlayLib");window.MpOverPlayLib=n},{"./../models/OverlayLib":1}]},{},[5]);