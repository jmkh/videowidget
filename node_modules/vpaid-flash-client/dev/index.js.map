{"version":3,"sources":["node_modules/browser-pack/_prelude.js","demo/demo.js","js/VPAIDFLASHClient.js"],"names":[],"mappings":"AAAA;ACAA;;AAEA,IAAI,mBAAmB,QAAvB,AAAuB,AAAQ;;AAE/B,IAAI,aAAa,IAAA,AAAI,iBAAiB,SAAA,AAAS,eAA9B,AAAqB,AAAwB,cAA9D,AAAiB,AAA2D;;AAE5E,SAAA,AAAS,wBAAT,AAAiC,KAAK,AAClC;QAAA,AAAI,KAAK,AACT;AACA;AACA;AACA;QAAI,QAAJ,AAAY,AACZ;AACA;eAAA,AAAW,WAAX,AAAsB,OAAO,UAAA,AAAU,OAAV,AAAiB,QAAQ,AAClD;YAAA,AAAI,OAAO,AAEX;;eAAA,AAAO,iBAAP,AAAwB,OAAxB,AAA+B,AAC/B;eAAA,AAAO,GAAP,AAAU,YAAV,AAAsB,AAEtB;;eAAA,AAAO,GAAP,AAAU,aAAa,UAAA,AAAU,KAAV,AAAe,QAAQ,AAC1C;oBAAA,AAAQ,IAAR,AAAY,mBAAZ,AAA+B,KAA/B,AAAoC,AACpC;AACH;AAHD,AAIA;gBAAA,AAAQ,IAAR,AAAY,AAEZ;;iBAAA,AAAS,OAAT,AAAgB,KAAhB,AAAqB,QAAQ,AACzB;oBAAA,AAAQ,IAAR,AAAY,aAAZ,AAAyB,KAAzB,AAA8B,AAC9B;mBAAA,AAAO,OAAP,AAAc,KAAd,AAAmB,KAAnB,AAAwB,UAAU,CAAlC,AAAmC,GAAnC,AAAsC,IAAtC,AAA0C,IAAI,UAAA,AAAU,KAAK,AACzD;wBAAA,AAAQ,IAAR,AAAY,UAAZ,AAAsB,AACzB;AAFD,AAGH;AAED;;iBAAA,AAAS,QAAT,AAAiB,KAAjB,AAAsB,QAAQ,AAC1B;oBAAA,AAAQ,IAAR,AAAY,kBAAZ,AAA8B,KAA9B,AAAmC,AACnC;mBAAA,AAAO,QAAQ,UAAA,AAAU,KAAV,AAAe,QAAQ,AAClC;wBAAA,AAAQ,IAAR,AAAY,gBAAZ,AAA4B,KAA5B,AAAiC,AACpC;AAFD,AAGH;AAED;;iBAAA,AAAS,oBAAoB,AACzB;mBAAA,AAAO,WAAW,UAAA,AAAU,KAAV,AAAe,QAAQ,AACrC;wBAAA,AAAQ,IAAR,AAAY,cAAZ,AAA0B,AAC7B;AAFD,AAGA;mBAAA,AAAO,YAAP,AAAmB,IAAI,UAAA,AAAU,KAAV,AAAe,QAAQ,AAC1C;wBAAA,AAAQ,IAAR,AAAY,eAAZ,AAA2B,AAE3B;;2BAAW,YAAY,AACnB;2BAAA,AAAO,YAAP,AAAmB,AACtB;AAFD,mBAAA,AAEG,AAGH;;2BAAW,YAAY,AACnB;2BAAA,AAAO,YAAP,AAAmB,AACtB;AAFD,mBAAA,AAEG,AACN;AAXD,AAYA;mBAAA,AAAO,YAAY,UAAA,AAAU,KAAV,AAAe,QAAQ,AACtC;wBAAA,AAAQ,IAAR,AAAY,eAAZ,AAA2B,AAC9B;AAFD,AAGH;AAEJ;AA/CD,AAgDH;;;;AC7DD;;AAEA,AACA;;;;IAAA,AAAM,AAAiB;;;;AAIvB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmKA,OAAA,AAAO,UAAP,AAAiB","file":"index.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nvar VPAIDFLASHClient = require('../js/VPAIDFLASHClient');\n\nvar flashVPaid = new VPAIDFLASHClient(document.getElementById('myContent'), flashVPAIDWrapperLoaded);\n\nfunction flashVPAIDWrapperLoaded(err) {\n    if (err) return;\n    // var adURL = 'http://cdn.innovid.com/2.62.8110/platform/vpaid/VPAIDIRollPackage.swf?configURL=http%3A%2F%2Fstatic.innovid.com%2Firoll%2Fconfig%2F1hl7lc.xml%3Fcb%3D787766d7-ebab-3656-c24f-0ddebab645e9&secure=false';\n    // var adURL = 'VPAIDIRollPackage.swf?configURL=http%3A%2F%2Fstatic.innovid.com%2Firoll%2Fconfig%2F1hl7lc.xml%3Fcb%3D787766d7-ebab-3656-c24f-0ddebab645e9&secure=false';\n    // var adURL = 'TestAd.swf';\n    var adURL = 'http://cdn-sys.brainient.com/flash/v6/select846.swf?video_id=a3f30b8e-2ad8-4123-bc58-42fccb3e48cd&user_id=1228&tzone=&settings=json&settingsPath=http://cdn-tags.brainient.com/1228/a3f30b8e-2ad8-4123-bc58-42fccb3e48cd/config.json';\n    // var adURL = 'http://shim.btrll.com/shim/20150715.85603_master/Scout.swf?asset_64=aHR0cDovL2NhY2hlLmJ0cmxsLmNvbS9wcm9kdWN0L3Rlc3QvdmFzdF93cmFwcGVyL2JyLXZhc3Rfd3JhcHBlci54bWw&vid_click_url=&h_64=YnJ4c2Vydi0yMi5idHJsbC5jb20&e=p&config_url_64=&type=VAST_TAG&vh_64=bWhleHQtMjIuYnRybGwuY29t&p=6834995&s=3863356&l=28043&ic=51223&ii=6594&x=TbBvLqwwDICcRVsPZkAABtiwAAyBcAOvM8AAAAAABhtJT2o-vMJQ&cx=&dn=&hidefb=true&iq=t&adc=false&si=&t=33&apep=0.03&hbp=0.01&epx=&ps=0.0&view=vast2&woid=____________________________________';\n    flashVPaid.loadAdUnit(adURL, function (error, adUnit) {\n        if (error) return;\n\n        adUnit.handshakeVersion('2.0', initAd);\n        adUnit.on('AdLoaded', startAd);\n\n        adUnit.on('AdStarted', function (err, result) {\n            console.log('event:AdStarted', err, result);\n            checkAdProperties();\n        });\n        console.log('adUnitLoaded');\n\n        function initAd(err, result) {\n            console.log('handShake', err, result);\n            adUnit.initAd(800, 400, 'normal', -1, '', '', function (err) {\n                console.log('initAd', err);\n            });\n        }\n\n        function startAd(err, result) {\n            console.log('event:AdLoaded', err, result);\n            adUnit.startAd(function (err, result) {\n                console.log('startAd call', err, result);\n            });\n        }\n\n        function checkAdProperties() {\n            adUnit.getAdIcons(function (err, result) {\n                console.log('getAdIcons', result);\n            });\n            adUnit.setAdVolume(.8, function (err, result) {\n                console.log('setAdVolume', result);\n\n                setTimeout(function () {\n                    adUnit.setAdVolume(0);\n                }, 2000);\n\n\n                setTimeout(function () {\n                    adUnit.setAdVolume(1);\n                }, 5000);\n            });\n            adUnit.getAdVolume(function (err, result) {\n                console.log('getAdVolume', result);\n            });\n        }\n\n    });\n}\n","'use strict';\n\n//const swfobject = require('swfobject');\nclass VPAIDFLASHClient {\n}\n\n\n/*\nconst JSFlashBridge = require('./jsFlashBridge').JSFlashBridge;\nconst VPAIDAdUnit = require('./VPAIDAdUnit').VPAIDAdUnit;\n\nconst noop = require('./utils').noop;\nconst callbackTimeout = require('./utils').callbackTimeout;\nconst isPositiveInt = require('./utils').isPositiveInt;\nconst createElementWithID = require('./utils').createElementWithID;\nconst uniqueVPAID = require('./utils').unique('vpaid');\nconst createFlashTester = require('./flashTester.js').createFlashTester;\n\nconst ERROR = 'error';\nconst FLASH_VERSION = '10.1.0';\n\nlet flashTester = {isSupported: ()=> true}; // if the runFlashTest is not run the flashTester will always return true\n\nclass VPAIDFLASHClient {\n    constructor (vpaidParentEl, callback, swfConfig = {data: 'VPAIDFlash.swf', width: 800, height: 400}, params = { wmode: 'transparent', salign: 'tl', align: 'left', allowScriptAccess: 'always', scale: 'noScale', allowFullScreen: 'true', quality: 'high'}, vpaidOptions = { debug: false, timeout: 10000 }) {\n\n        var me = this;\n\n        this._vpaidParentEl = vpaidParentEl;\n        this._flashID = uniqueVPAID();\n        this._destroyed = false;\n        callback = callback || noop;\n\n        swfConfig.width = isPositiveInt(swfConfig.width, 800);\n        swfConfig.height = isPositiveInt(swfConfig.height, 400);\n\n        createElementWithID(vpaidParentEl, this._flashID, true);\n\n        params.movie = swfConfig.data;\n        params.FlashVars = `flashid=${this._flashID}&handler=${JSFlashBridge.VPAID_FLASH_HANDLER}&debug=${vpaidOptions.debug}&salign=${params.salign}`;\n\n        if (!VPAIDFLASHClient.isSupported()) {\n            return onError('user don\\'t support flash or doesn\\'t have the minimum required version of flash ' + FLASH_VERSION);\n        }\n\n        this.el = swfobject.createSWF(swfConfig, params, this._flashID);\n\n        if (!this.el) {\n            return onError( 'swfobject failed to create object in element' );\n        }\n\n        var handler = callbackTimeout(vpaidOptions.timeout,\n            (err, data) => {\n                $loadPendedAdUnit.call(this);\n                callback(err, data);\n            }, () => {\n                callback('vpaid flash load timeout ' + vpaidOptions.timeout);\n            }\n        );\n\n        this._flash = new JSFlashBridge(this.el, swfConfig.data, this._flashID, swfConfig.width, swfConfig.height, handler);\n\n        function onError(error) {\n            setTimeout(() => {\n                callback(new Error(error));\n            }, 0);\n            return me;\n        }\n\n    }\n\n    destroy () {\n        this._destroyAdUnit();\n\n        if (this._flash) {\n            this._flash.destroy();\n            this._flash = null;\n        }\n        this.el = null;\n        this._destroyed = true;\n    }\n\n    isDestroyed () {\n        return this._destroyed;\n    }\n\n    _destroyAdUnit() {\n        delete this._loadLater;\n\n        if (this._adUnitLoad) {\n            this._adUnitLoad = null;\n            this._flash.removeCallback(this._adUnitLoad);\n        }\n\n        if (this._adUnit) {\n            this._adUnit._destroy();\n            this._adUnit = null;\n        }\n    }\n\n    loadAdUnit(adURL, callback) {\n        $throwIfDestroyed.call(this);\n\n        if (this._adUnit) {\n            this._destroyAdUnit();\n        }\n\n        if (this._flash.isReady()) {\n            this._adUnitLoad = (err, message) => {\n                if (!err) {\n                    this._adUnit = new VPAIDAdUnit(this._flash);\n                }\n                this._adUnitLoad = null;\n                callback(err, this._adUnit);\n            };\n\n            this._flash.callFlashMethod('loadAdUnit', [adURL], this._adUnitLoad);\n        }else {\n            this._loadLater = {url: adURL, callback};\n        }\n    }\n\n    unloadAdUnit(callback = undefined) {\n        $throwIfDestroyed.call(this);\n\n        this._destroyAdUnit();\n        this._flash.callFlashMethod('unloadAdUnit', [], callback);\n    }\n    getFlashID() {\n        $throwIfDestroyed.call(this);\n        return this._flash.getFlashID();\n    }\n    getFlashURL() {\n        $throwIfDestroyed.call(this);\n        return this._flash.getFlashURL();\n    }\n\t\n}\n\nsetStaticProperty('isSupported', () => {\n    return swfobject.hasFlashPlayerVersion(FLASH_VERSION) && flashTester.isSupported();\n}, true);\n\nsetStaticProperty('runFlashTest', (swfConfig) => {\n    flashTester = createFlashTester(document.body, swfConfig);\n});\n\nfunction $throwIfDestroyed() {\n    if(this._destroyed) {\n        throw new Error('VPAIDFlashToJS is destroyed!');\n    }\n}\n\nfunction $loadPendedAdUnit() {\n    if (this._loadLater) {\n        this.loadAdUnit(this._loadLater.url, this._loadLater.callback);\n        delete this._loadLater;\n    }\n}\n\nfunction setStaticProperty(propertyName, value, writable = false) {\n    Object.defineProperty(VPAIDFLASHClient, propertyName, {\n        writable: writable,\n        configurable: false,\n        value: value\n    });\n}\n\nVPAIDFLASHClient.swfobject = swfobject;\n*/\nmodule.exports = VPAIDFLASHClient;\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJkZW1vL2RlbW8uanMiLCJqcy9WUEFJREZMQVNIQ2xpZW50LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7O0FBRUEsSUFBSSxtQkFBbUIsUUFBdkIsQUFBdUIsQUFBUTs7QUFFL0IsSUFBSSxhQUFhLElBQUEsQUFBSSxpQkFBaUIsU0FBQSxBQUFTLGVBQTlCLEFBQXFCLEFBQXdCLGNBQTlELEFBQWlCLEFBQTJEOztBQUU1RSxTQUFBLEFBQVMsd0JBQVQsQUFBaUMsS0FBSyxBQUNsQztRQUFBLEFBQUksS0FBSyxBQUNUO0FBQ0E7QUFDQTtBQUNBO1FBQUksUUFBSixBQUFZLEFBQ1o7QUFDQTtlQUFBLEFBQVcsV0FBWCxBQUFzQixPQUFPLFVBQUEsQUFBVSxPQUFWLEFBQWlCLFFBQVEsQUFDbEQ7WUFBQSxBQUFJLE9BQU8sQUFFWDs7ZUFBQSxBQUFPLGlCQUFQLEFBQXdCLE9BQXhCLEFBQStCLEFBQy9CO2VBQUEsQUFBTyxHQUFQLEFBQVUsWUFBVixBQUFzQixBQUV0Qjs7ZUFBQSxBQUFPLEdBQVAsQUFBVSxhQUFhLFVBQUEsQUFBVSxLQUFWLEFBQWUsUUFBUSxBQUMxQztvQkFBQSxBQUFRLElBQVIsQUFBWSxtQkFBWixBQUErQixLQUEvQixBQUFvQyxBQUNwQztBQUNIO0FBSEQsQUFJQTtnQkFBQSxBQUFRLElBQVIsQUFBWSxBQUVaOztpQkFBQSxBQUFTLE9BQVQsQUFBZ0IsS0FBaEIsQUFBcUIsUUFBUSxBQUN6QjtvQkFBQSxBQUFRLElBQVIsQUFBWSxhQUFaLEFBQXlCLEtBQXpCLEFBQThCLEFBQzlCO21CQUFBLEFBQU8sT0FBUCxBQUFjLEtBQWQsQUFBbUIsS0FBbkIsQUFBd0IsVUFBVSxDQUFsQyxBQUFtQyxHQUFuQyxBQUFzQyxJQUF0QyxBQUEwQyxJQUFJLFVBQUEsQUFBVSxLQUFLLEFBQ3pEO3dCQUFBLEFBQVEsSUFBUixBQUFZLFVBQVosQUFBc0IsQUFDekI7QUFGRCxBQUdIO0FBRUQ7O2lCQUFBLEFBQVMsUUFBVCxBQUFpQixLQUFqQixBQUFzQixRQUFRLEFBQzFCO29CQUFBLEFBQVEsSUFBUixBQUFZLGtCQUFaLEFBQThCLEtBQTlCLEFBQW1DLEFBQ25DO21CQUFBLEFBQU8sUUFBUSxVQUFBLEFBQVUsS0FBVixBQUFlLFFBQVEsQUFDbEM7d0JBQUEsQUFBUSxJQUFSLEFBQVksZ0JBQVosQUFBNEIsS0FBNUIsQUFBaUMsQUFDcEM7QUFGRCxBQUdIO0FBRUQ7O2lCQUFBLEFBQVMsb0JBQW9CLEFBQ3pCO21CQUFBLEFBQU8sV0FBVyxVQUFBLEFBQVUsS0FBVixBQUFlLFFBQVEsQUFDckM7d0JBQUEsQUFBUSxJQUFSLEFBQVksY0FBWixBQUEwQixBQUM3QjtBQUZELEFBR0E7bUJBQUEsQUFBTyxZQUFQLEFBQW1CLElBQUksVUFBQSxBQUFVLEtBQVYsQUFBZSxRQUFRLEFBQzFDO3dCQUFBLEFBQVEsSUFBUixBQUFZLGVBQVosQUFBMkIsQUFFM0I7OzJCQUFXLFlBQVksQUFDbkI7MkJBQUEsQUFBTyxZQUFQLEFBQW1CLEFBQ3RCO0FBRkQsbUJBQUEsQUFFRyxBQUdIOzsyQkFBVyxZQUFZLEFBQ25COzJCQUFBLEFBQU8sWUFBUCxBQUFtQixBQUN0QjtBQUZELG1CQUFBLEFBRUcsQUFDTjtBQVhELEFBWUE7bUJBQUEsQUFBTyxZQUFZLFVBQUEsQUFBVSxLQUFWLEFBQWUsUUFBUSxBQUN0Qzt3QkFBQSxBQUFRLElBQVIsQUFBWSxlQUFaLEFBQTJCLEFBQzlCO0FBRkQsQUFHSDtBQUVKO0FBL0NELEFBZ0RIOzs7O0FDN0REOztBQUVBLEFBQ0E7Ozs7SUFBQSxBQUFNLEFBQWlCOzs7O0FBSXZCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFtS0EsT0FBQSxBQUFPLFVBQVAsQUFBaUIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgVlBBSURGTEFTSENsaWVudCA9IHJlcXVpcmUoJy4uL2pzL1ZQQUlERkxBU0hDbGllbnQnKTtcblxudmFyIGZsYXNoVlBhaWQgPSBuZXcgVlBBSURGTEFTSENsaWVudChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXlDb250ZW50JyksIGZsYXNoVlBBSURXcmFwcGVyTG9hZGVkKTtcblxuZnVuY3Rpb24gZmxhc2hWUEFJRFdyYXBwZXJMb2FkZWQoZXJyKSB7XG4gICAgaWYgKGVycikgcmV0dXJuO1xuICAgIC8vIHZhciBhZFVSTCA9ICdodHRwOi8vY2RuLmlubm92aWQuY29tLzIuNjIuODExMC9wbGF0Zm9ybS92cGFpZC9WUEFJRElSb2xsUGFja2FnZS5zd2Y/Y29uZmlnVVJMPWh0dHAlM0ElMkYlMkZzdGF0aWMuaW5ub3ZpZC5jb20lMkZpcm9sbCUyRmNvbmZpZyUyRjFobDdsYy54bWwlM0ZjYiUzRDc4Nzc2NmQ3LWViYWItMzY1Ni1jMjRmLTBkZGViYWI2NDVlOSZzZWN1cmU9ZmFsc2UnO1xuICAgIC8vIHZhciBhZFVSTCA9ICdWUEFJRElSb2xsUGFja2FnZS5zd2Y/Y29uZmlnVVJMPWh0dHAlM0ElMkYlMkZzdGF0aWMuaW5ub3ZpZC5jb20lMkZpcm9sbCUyRmNvbmZpZyUyRjFobDdsYy54bWwlM0ZjYiUzRDc4Nzc2NmQ3LWViYWItMzY1Ni1jMjRmLTBkZGViYWI2NDVlOSZzZWN1cmU9ZmFsc2UnO1xuICAgIC8vIHZhciBhZFVSTCA9ICdUZXN0QWQuc3dmJztcbiAgICB2YXIgYWRVUkwgPSAnaHR0cDovL2Nkbi1zeXMuYnJhaW5pZW50LmNvbS9mbGFzaC92Ni9zZWxlY3Q4NDYuc3dmP3ZpZGVvX2lkPWEzZjMwYjhlLTJhZDgtNDEyMy1iYzU4LTQyZmNjYjNlNDhjZCZ1c2VyX2lkPTEyMjgmdHpvbmU9JnNldHRpbmdzPWpzb24mc2V0dGluZ3NQYXRoPWh0dHA6Ly9jZG4tdGFncy5icmFpbmllbnQuY29tLzEyMjgvYTNmMzBiOGUtMmFkOC00MTIzLWJjNTgtNDJmY2NiM2U0OGNkL2NvbmZpZy5qc29uJztcbiAgICAvLyB2YXIgYWRVUkwgPSAnaHR0cDovL3NoaW0uYnRybGwuY29tL3NoaW0vMjAxNTA3MTUuODU2MDNfbWFzdGVyL1Njb3V0LnN3Zj9hc3NldF82ND1hSFIwY0RvdkwyTmhZMmhsTG1KMGNteHNMbU52YlM5d2NtOWtkV04wTDNSbGMzUXZkbUZ6ZEY5M2NtRndjR1Z5TDJKeUxYWmhjM1JmZDNKaGNIQmxjaTU0Yld3JnZpZF9jbGlja191cmw9JmhfNjQ9WW5KNGMyVnlkaTB5TWk1aWRISnNiQzVqYjIwJmU9cCZjb25maWdfdXJsXzY0PSZ0eXBlPVZBU1RfVEFHJnZoXzY0PWJXaGxlSFF0TWpJdVluUnliR3d1WTI5dCZwPTY4MzQ5OTUmcz0zODYzMzU2Jmw9MjgwNDMmaWM9NTEyMjMmaWk9NjU5NCZ4PVRiQnZMcXd3RElDY1JWc1Baa0FBQnRpd0FBeUJjQU92TThBQUFBQUFCaHRKVDJvLXZNSlEmY3g9JmRuPSZoaWRlZmI9dHJ1ZSZpcT10JmFkYz1mYWxzZSZzaT0mdD0zMyZhcGVwPTAuMDMmaGJwPTAuMDEmZXB4PSZwcz0wLjAmdmlldz12YXN0MiZ3b2lkPV9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXyc7XG4gICAgZmxhc2hWUGFpZC5sb2FkQWRVbml0KGFkVVJMLCBmdW5jdGlvbiAoZXJyb3IsIGFkVW5pdCkge1xuICAgICAgICBpZiAoZXJyb3IpIHJldHVybjtcblxuICAgICAgICBhZFVuaXQuaGFuZHNoYWtlVmVyc2lvbignMi4wJywgaW5pdEFkKTtcbiAgICAgICAgYWRVbml0Lm9uKCdBZExvYWRlZCcsIHN0YXJ0QWQpO1xuXG4gICAgICAgIGFkVW5pdC5vbignQWRTdGFydGVkJywgZnVuY3Rpb24gKGVyciwgcmVzdWx0KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZXZlbnQ6QWRTdGFydGVkJywgZXJyLCByZXN1bHQpO1xuICAgICAgICAgICAgY2hlY2tBZFByb3BlcnRpZXMoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdhZFVuaXRMb2FkZWQnKTtcblxuICAgICAgICBmdW5jdGlvbiBpbml0QWQoZXJyLCByZXN1bHQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdoYW5kU2hha2UnLCBlcnIsIHJlc3VsdCk7XG4gICAgICAgICAgICBhZFVuaXQuaW5pdEFkKDgwMCwgNDAwLCAnbm9ybWFsJywgLTEsICcnLCAnJywgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbml0QWQnLCBlcnIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzdGFydEFkKGVyciwgcmVzdWx0KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZXZlbnQ6QWRMb2FkZWQnLCBlcnIsIHJlc3VsdCk7XG4gICAgICAgICAgICBhZFVuaXQuc3RhcnRBZChmdW5jdGlvbiAoZXJyLCByZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc3RhcnRBZCBjYWxsJywgZXJyLCByZXN1bHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjaGVja0FkUHJvcGVydGllcygpIHtcbiAgICAgICAgICAgIGFkVW5pdC5nZXRBZEljb25zKGZ1bmN0aW9uIChlcnIsIHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnZXRBZEljb25zJywgcmVzdWx0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYWRVbml0LnNldEFkVm9sdW1lKC44LCBmdW5jdGlvbiAoZXJyLCByZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2V0QWRWb2x1bWUnLCByZXN1bHQpO1xuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkVW5pdC5zZXRBZFZvbHVtZSgwKTtcbiAgICAgICAgICAgICAgICB9LCAyMDAwKTtcblxuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkVW5pdC5zZXRBZFZvbHVtZSgxKTtcbiAgICAgICAgICAgICAgICB9LCA1MDAwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYWRVbml0LmdldEFkVm9sdW1lKGZ1bmN0aW9uIChlcnIsIHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnZXRBZFZvbHVtZScsIHJlc3VsdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgfSk7XG59XG4iLCIndXNlIHN0cmljdCc7XG5cbi8vY29uc3Qgc3dmb2JqZWN0ID0gcmVxdWlyZSgnc3dmb2JqZWN0Jyk7XG5jbGFzcyBWUEFJREZMQVNIQ2xpZW50IHtcbn1cblxuXG4vKlxuY29uc3QgSlNGbGFzaEJyaWRnZSA9IHJlcXVpcmUoJy4vanNGbGFzaEJyaWRnZScpLkpTRmxhc2hCcmlkZ2U7XG5jb25zdCBWUEFJREFkVW5pdCA9IHJlcXVpcmUoJy4vVlBBSURBZFVuaXQnKS5WUEFJREFkVW5pdDtcblxuY29uc3Qgbm9vcCA9IHJlcXVpcmUoJy4vdXRpbHMnKS5ub29wO1xuY29uc3QgY2FsbGJhY2tUaW1lb3V0ID0gcmVxdWlyZSgnLi91dGlscycpLmNhbGxiYWNrVGltZW91dDtcbmNvbnN0IGlzUG9zaXRpdmVJbnQgPSByZXF1aXJlKCcuL3V0aWxzJykuaXNQb3NpdGl2ZUludDtcbmNvbnN0IGNyZWF0ZUVsZW1lbnRXaXRoSUQgPSByZXF1aXJlKCcuL3V0aWxzJykuY3JlYXRlRWxlbWVudFdpdGhJRDtcbmNvbnN0IHVuaXF1ZVZQQUlEID0gcmVxdWlyZSgnLi91dGlscycpLnVuaXF1ZSgndnBhaWQnKTtcbmNvbnN0IGNyZWF0ZUZsYXNoVGVzdGVyID0gcmVxdWlyZSgnLi9mbGFzaFRlc3Rlci5qcycpLmNyZWF0ZUZsYXNoVGVzdGVyO1xuXG5jb25zdCBFUlJPUiA9ICdlcnJvcic7XG5jb25zdCBGTEFTSF9WRVJTSU9OID0gJzEwLjEuMCc7XG5cbmxldCBmbGFzaFRlc3RlciA9IHtpc1N1cHBvcnRlZDogKCk9PiB0cnVlfTsgLy8gaWYgdGhlIHJ1bkZsYXNoVGVzdCBpcyBub3QgcnVuIHRoZSBmbGFzaFRlc3RlciB3aWxsIGFsd2F5cyByZXR1cm4gdHJ1ZVxuXG5jbGFzcyBWUEFJREZMQVNIQ2xpZW50IHtcbiAgICBjb25zdHJ1Y3RvciAodnBhaWRQYXJlbnRFbCwgY2FsbGJhY2ssIHN3ZkNvbmZpZyA9IHtkYXRhOiAnVlBBSURGbGFzaC5zd2YnLCB3aWR0aDogODAwLCBoZWlnaHQ6IDQwMH0sIHBhcmFtcyA9IHsgd21vZGU6ICd0cmFuc3BhcmVudCcsIHNhbGlnbjogJ3RsJywgYWxpZ246ICdsZWZ0JywgYWxsb3dTY3JpcHRBY2Nlc3M6ICdhbHdheXMnLCBzY2FsZTogJ25vU2NhbGUnLCBhbGxvd0Z1bGxTY3JlZW46ICd0cnVlJywgcXVhbGl0eTogJ2hpZ2gnfSwgdnBhaWRPcHRpb25zID0geyBkZWJ1ZzogZmFsc2UsIHRpbWVvdXQ6IDEwMDAwIH0pIHtcblxuICAgICAgICB2YXIgbWUgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMuX3ZwYWlkUGFyZW50RWwgPSB2cGFpZFBhcmVudEVsO1xuICAgICAgICB0aGlzLl9mbGFzaElEID0gdW5pcXVlVlBBSUQoKTtcbiAgICAgICAgdGhpcy5fZGVzdHJveWVkID0gZmFsc2U7XG4gICAgICAgIGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgbm9vcDtcblxuICAgICAgICBzd2ZDb25maWcud2lkdGggPSBpc1Bvc2l0aXZlSW50KHN3ZkNvbmZpZy53aWR0aCwgODAwKTtcbiAgICAgICAgc3dmQ29uZmlnLmhlaWdodCA9IGlzUG9zaXRpdmVJbnQoc3dmQ29uZmlnLmhlaWdodCwgNDAwKTtcblxuICAgICAgICBjcmVhdGVFbGVtZW50V2l0aElEKHZwYWlkUGFyZW50RWwsIHRoaXMuX2ZsYXNoSUQsIHRydWUpO1xuXG4gICAgICAgIHBhcmFtcy5tb3ZpZSA9IHN3ZkNvbmZpZy5kYXRhO1xuICAgICAgICBwYXJhbXMuRmxhc2hWYXJzID0gYGZsYXNoaWQ9JHt0aGlzLl9mbGFzaElEfSZoYW5kbGVyPSR7SlNGbGFzaEJyaWRnZS5WUEFJRF9GTEFTSF9IQU5ETEVSfSZkZWJ1Zz0ke3ZwYWlkT3B0aW9ucy5kZWJ1Z30mc2FsaWduPSR7cGFyYW1zLnNhbGlnbn1gO1xuXG4gICAgICAgIGlmICghVlBBSURGTEFTSENsaWVudC5pc1N1cHBvcnRlZCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gb25FcnJvcigndXNlciBkb25cXCd0IHN1cHBvcnQgZmxhc2ggb3IgZG9lc25cXCd0IGhhdmUgdGhlIG1pbmltdW0gcmVxdWlyZWQgdmVyc2lvbiBvZiBmbGFzaCAnICsgRkxBU0hfVkVSU0lPTik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmVsID0gc3dmb2JqZWN0LmNyZWF0ZVNXRihzd2ZDb25maWcsIHBhcmFtcywgdGhpcy5fZmxhc2hJRCk7XG5cbiAgICAgICAgaWYgKCF0aGlzLmVsKSB7XG4gICAgICAgICAgICByZXR1cm4gb25FcnJvciggJ3N3Zm9iamVjdCBmYWlsZWQgdG8gY3JlYXRlIG9iamVjdCBpbiBlbGVtZW50JyApO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGhhbmRsZXIgPSBjYWxsYmFja1RpbWVvdXQodnBhaWRPcHRpb25zLnRpbWVvdXQsXG4gICAgICAgICAgICAoZXJyLCBkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgJGxvYWRQZW5kZWRBZFVuaXQuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnIsIGRhdGEpO1xuICAgICAgICAgICAgfSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCd2cGFpZCBmbGFzaCBsb2FkIHRpbWVvdXQgJyArIHZwYWlkT3B0aW9ucy50aW1lb3V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLl9mbGFzaCA9IG5ldyBKU0ZsYXNoQnJpZGdlKHRoaXMuZWwsIHN3ZkNvbmZpZy5kYXRhLCB0aGlzLl9mbGFzaElELCBzd2ZDb25maWcud2lkdGgsIHN3ZkNvbmZpZy5oZWlnaHQsIGhhbmRsZXIpO1xuXG4gICAgICAgIGZ1bmN0aW9uIG9uRXJyb3IoZXJyb3IpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcihlcnJvcikpO1xuICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICByZXR1cm4gbWU7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIGRlc3Ryb3kgKCkge1xuICAgICAgICB0aGlzLl9kZXN0cm95QWRVbml0KCk7XG5cbiAgICAgICAgaWYgKHRoaXMuX2ZsYXNoKSB7XG4gICAgICAgICAgICB0aGlzLl9mbGFzaC5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLl9mbGFzaCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbCA9IG51bGw7XG4gICAgICAgIHRoaXMuX2Rlc3Ryb3llZCA9IHRydWU7XG4gICAgfVxuXG4gICAgaXNEZXN0cm95ZWQgKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVzdHJveWVkO1xuICAgIH1cblxuICAgIF9kZXN0cm95QWRVbml0KCkge1xuICAgICAgICBkZWxldGUgdGhpcy5fbG9hZExhdGVyO1xuXG4gICAgICAgIGlmICh0aGlzLl9hZFVuaXRMb2FkKSB7XG4gICAgICAgICAgICB0aGlzLl9hZFVuaXRMb2FkID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX2ZsYXNoLnJlbW92ZUNhbGxiYWNrKHRoaXMuX2FkVW5pdExvYWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2FkVW5pdCkge1xuICAgICAgICAgICAgdGhpcy5fYWRVbml0Ll9kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLl9hZFVuaXQgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbG9hZEFkVW5pdChhZFVSTCwgY2FsbGJhY2spIHtcbiAgICAgICAgJHRocm93SWZEZXN0cm95ZWQuY2FsbCh0aGlzKTtcblxuICAgICAgICBpZiAodGhpcy5fYWRVbml0KSB7XG4gICAgICAgICAgICB0aGlzLl9kZXN0cm95QWRVbml0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5fZmxhc2guaXNSZWFkeSgpKSB7XG4gICAgICAgICAgICB0aGlzLl9hZFVuaXRMb2FkID0gKGVyciwgbWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2FkVW5pdCA9IG5ldyBWUEFJREFkVW5pdCh0aGlzLl9mbGFzaCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuX2FkVW5pdExvYWQgPSBudWxsO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVyciwgdGhpcy5fYWRVbml0KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMuX2ZsYXNoLmNhbGxGbGFzaE1ldGhvZCgnbG9hZEFkVW5pdCcsIFthZFVSTF0sIHRoaXMuX2FkVW5pdExvYWQpO1xuICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9sb2FkTGF0ZXIgPSB7dXJsOiBhZFVSTCwgY2FsbGJhY2t9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdW5sb2FkQWRVbml0KGNhbGxiYWNrID0gdW5kZWZpbmVkKSB7XG4gICAgICAgICR0aHJvd0lmRGVzdHJveWVkLmNhbGwodGhpcyk7XG5cbiAgICAgICAgdGhpcy5fZGVzdHJveUFkVW5pdCgpO1xuICAgICAgICB0aGlzLl9mbGFzaC5jYWxsRmxhc2hNZXRob2QoJ3VubG9hZEFkVW5pdCcsIFtdLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIGdldEZsYXNoSUQoKSB7XG4gICAgICAgICR0aHJvd0lmRGVzdHJveWVkLmNhbGwodGhpcyk7XG4gICAgICAgIHJldHVybiB0aGlzLl9mbGFzaC5nZXRGbGFzaElEKCk7XG4gICAgfVxuICAgIGdldEZsYXNoVVJMKCkge1xuICAgICAgICAkdGhyb3dJZkRlc3Ryb3llZC5jYWxsKHRoaXMpO1xuICAgICAgICByZXR1cm4gdGhpcy5fZmxhc2guZ2V0Rmxhc2hVUkwoKTtcbiAgICB9XG5cdFxufVxuXG5zZXRTdGF0aWNQcm9wZXJ0eSgnaXNTdXBwb3J0ZWQnLCAoKSA9PiB7XG4gICAgcmV0dXJuIHN3Zm9iamVjdC5oYXNGbGFzaFBsYXllclZlcnNpb24oRkxBU0hfVkVSU0lPTikgJiYgZmxhc2hUZXN0ZXIuaXNTdXBwb3J0ZWQoKTtcbn0sIHRydWUpO1xuXG5zZXRTdGF0aWNQcm9wZXJ0eSgncnVuRmxhc2hUZXN0JywgKHN3ZkNvbmZpZykgPT4ge1xuICAgIGZsYXNoVGVzdGVyID0gY3JlYXRlRmxhc2hUZXN0ZXIoZG9jdW1lbnQuYm9keSwgc3dmQ29uZmlnKTtcbn0pO1xuXG5mdW5jdGlvbiAkdGhyb3dJZkRlc3Ryb3llZCgpIHtcbiAgICBpZih0aGlzLl9kZXN0cm95ZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdWUEFJREZsYXNoVG9KUyBpcyBkZXN0cm95ZWQhJyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiAkbG9hZFBlbmRlZEFkVW5pdCgpIHtcbiAgICBpZiAodGhpcy5fbG9hZExhdGVyKSB7XG4gICAgICAgIHRoaXMubG9hZEFkVW5pdCh0aGlzLl9sb2FkTGF0ZXIudXJsLCB0aGlzLl9sb2FkTGF0ZXIuY2FsbGJhY2spO1xuICAgICAgICBkZWxldGUgdGhpcy5fbG9hZExhdGVyO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc2V0U3RhdGljUHJvcGVydHkocHJvcGVydHlOYW1lLCB2YWx1ZSwgd3JpdGFibGUgPSBmYWxzZSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWUEFJREZMQVNIQ2xpZW50LCBwcm9wZXJ0eU5hbWUsIHtcbiAgICAgICAgd3JpdGFibGU6IHdyaXRhYmxlLFxuICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICB9KTtcbn1cblxuVlBBSURGTEFTSENsaWVudC5zd2ZvYmplY3QgPSBzd2ZvYmplY3Q7XG4qL1xubW9kdWxlLmV4cG9ydHMgPSBWUEFJREZMQVNIQ2xpZW50O1xuIl19"}