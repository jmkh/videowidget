{"version":3,"sources":["node_modules/browser-pack/_prelude.js","js/VPAIDFLASHClient.js","js/jsFlashBridge.js","js/jsFlashBridgeRegistry.js","js/registry.js","js/utils.js","node_modules/swfobject/index.js"],"names":[],"mappings":"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","file":"VPAIDFLASHClient.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nconst swfobject = require('swfobject');\nconst JSFlashBridge = require('./jsFlashBridge').JSFlashBridge;\n//const VPAIDAdUnit = require('./VPAIDAdUnit').VPAIDAdUnit;\nclass VPAIDFLASHClient {\n}\n\n\n/*\n\n\nconst noop = require('./utils').noop;\nconst callbackTimeout = require('./utils').callbackTimeout;\nconst isPositiveInt = require('./utils').isPositiveInt;\nconst createElementWithID = require('./utils').createElementWithID;\nconst uniqueVPAID = require('./utils').unique('vpaid');\nconst createFlashTester = require('./flashTester.js').createFlashTester;\n\nconst ERROR = 'error';\nconst FLASH_VERSION = '10.1.0';\n\nlet flashTester = {isSupported: ()=> true}; // if the runFlashTest is not run the flashTester will always return true\n\nclass VPAIDFLASHClient {\n    constructor (vpaidParentEl, callback, swfConfig = {data: 'VPAIDFlash.swf', width: 800, height: 400}, params = { wmode: 'transparent', salign: 'tl', align: 'left', allowScriptAccess: 'always', scale: 'noScale', allowFullScreen: 'true', quality: 'high'}, vpaidOptions = { debug: false, timeout: 10000 }) {\n\n        var me = this;\n\n        this._vpaidParentEl = vpaidParentEl;\n        this._flashID = uniqueVPAID();\n        this._destroyed = false;\n        callback = callback || noop;\n\n        swfConfig.width = isPositiveInt(swfConfig.width, 800);\n        swfConfig.height = isPositiveInt(swfConfig.height, 400);\n\n        createElementWithID(vpaidParentEl, this._flashID, true);\n\n        params.movie = swfConfig.data;\n        params.FlashVars = `flashid=${this._flashID}&handler=${JSFlashBridge.VPAID_FLASH_HANDLER}&debug=${vpaidOptions.debug}&salign=${params.salign}`;\n\n        if (!VPAIDFLASHClient.isSupported()) {\n            return onError('user don\\'t support flash or doesn\\'t have the minimum required version of flash ' + FLASH_VERSION);\n        }\n\n        this.el = swfobject.createSWF(swfConfig, params, this._flashID);\n\n        if (!this.el) {\n            return onError( 'swfobject failed to create object in element' );\n        }\n\n        var handler = callbackTimeout(vpaidOptions.timeout,\n            (err, data) => {\n                $loadPendedAdUnit.call(this);\n                callback(err, data);\n            }, () => {\n                callback('vpaid flash load timeout ' + vpaidOptions.timeout);\n            }\n        );\n\n        this._flash = new JSFlashBridge(this.el, swfConfig.data, this._flashID, swfConfig.width, swfConfig.height, handler);\n\n        function onError(error) {\n            setTimeout(() => {\n                callback(new Error(error));\n            }, 0);\n            return me;\n        }\n\n    }\n\n    destroy () {\n        this._destroyAdUnit();\n\n        if (this._flash) {\n            this._flash.destroy();\n            this._flash = null;\n        }\n        this.el = null;\n        this._destroyed = true;\n    }\n\n    isDestroyed () {\n        return this._destroyed;\n    }\n\n    _destroyAdUnit() {\n        delete this._loadLater;\n\n        if (this._adUnitLoad) {\n            this._adUnitLoad = null;\n            this._flash.removeCallback(this._adUnitLoad);\n        }\n\n        if (this._adUnit) {\n            this._adUnit._destroy();\n            this._adUnit = null;\n        }\n    }\n\n    loadAdUnit(adURL, callback) {\n        $throwIfDestroyed.call(this);\n\n        if (this._adUnit) {\n            this._destroyAdUnit();\n        }\n\n        if (this._flash.isReady()) {\n            this._adUnitLoad = (err, message) => {\n                if (!err) {\n                    this._adUnit = new VPAIDAdUnit(this._flash);\n                }\n                this._adUnitLoad = null;\n                callback(err, this._adUnit);\n            };\n\n            this._flash.callFlashMethod('loadAdUnit', [adURL], this._adUnitLoad);\n        }else {\n            this._loadLater = {url: adURL, callback};\n        }\n    }\n\n    unloadAdUnit(callback = undefined) {\n        $throwIfDestroyed.call(this);\n\n        this._destroyAdUnit();\n        this._flash.callFlashMethod('unloadAdUnit', [], callback);\n    }\n    getFlashID() {\n        $throwIfDestroyed.call(this);\n        return this._flash.getFlashID();\n    }\n    getFlashURL() {\n        $throwIfDestroyed.call(this);\n        return this._flash.getFlashURL();\n    }\n\t\n}\n\nsetStaticProperty('isSupported', () => {\n    return swfobject.hasFlashPlayerVersion(FLASH_VERSION) && flashTester.isSupported();\n}, true);\n\nsetStaticProperty('runFlashTest', (swfConfig) => {\n    flashTester = createFlashTester(document.body, swfConfig);\n});\n\nfunction $throwIfDestroyed() {\n    if(this._destroyed) {\n        throw new Error('VPAIDFlashToJS is destroyed!');\n    }\n}\n\nfunction $loadPendedAdUnit() {\n    if (this._loadLater) {\n        this.loadAdUnit(this._loadLater.url, this._loadLater.callback);\n        delete this._loadLater;\n    }\n}\n\nfunction setStaticProperty(propertyName, value, writable = false) {\n    Object.defineProperty(VPAIDFLASHClient, propertyName, {\n        writable: writable,\n        configurable: false,\n        value: value\n    });\n}\n\n\n*/\nVPAIDFLASHClient.swfobject = swfobject;\nmodule.exports =  VPAIDFLASHClient;\n","'use strict';\n\nlet unique = require('./utils').unique;\nlet isPositiveInt = require('./utils').isPositiveInt;\nlet stringEndsWith = require('./utils').stringEndsWith;\nlet SingleValueRegistry = require('./registry').SingleValueRegistry;\nlet MultipleValuesRegistry = require('./registry').MultipleValuesRegistry;\nconst registry = require('./jsFlashBridgeRegistry');\nconst VPAID_FLASH_HANDLER = 'vpaid_video_flash_handler';\nconst ERROR = 'AdError';\n\nclass JSFlashBridge {\n    constructor (el, flashURL, flashID, width, height, loadHandShake) {\n        this._el = el;\n        this._flashID = flashID;\n        this._flashURL = flashURL;\n        this._width = width;\n        this._height = height;\n        this._handlers = new MultipleValuesRegistry();\n        this._callbacks = new SingleValueRegistry();\n        this._uniqueMethodIdentifier = unique(this._flashID);\n        this._ready = false;\n        this._handShakeHandler = loadHandShake;\n\n        registry.addInstance(this._flashID, this);\n    }\n\n    on(eventName, callback) {\n        this._handlers.add(eventName, callback);\n    }\n\n    off(eventName, callback) {\n        return this._handlers.remove(eventName, callback);\n    }\n\n    offEvent(eventName) {\n        return this._handlers.removeByKey(eventName);\n    }\n\n    offAll() {\n        return this._handlers.removeAll();\n    }\n\n    callFlashMethod(methodName, args = [], callback = undefined) {\n        var callbackID = '';\n        // if no callback, some methods the return is void so they don't need callback\n        if (callback) {\n            callbackID = `${this._uniqueMethodIdentifier()}_${methodName}`;\n            this._callbacks.add(callbackID, callback);\n        }\n\n\n        try {\n            //methods are created by ExternalInterface.addCallback in as3 code, if for some reason it failed\n            //this code will throw an error\n            this._el[methodName]([callbackID].concat(args));\n\n        } catch (e) {\n            if (callback) {\n                $asyncCallback.call(this, callbackID, e);\n            } else {\n\n                //if there isn't any callback to return error use error event handler\n                this._trigger(ERROR, e);\n            }\n        }\n    }\n\n    removeCallback(callback) {\n        return this._callbacks.removeByValue(callback);\n    }\n\n    removeCallbackByMethodName(suffix) {\n        this._callbacks.filterKeys((key) => {\n            return stringEndsWith(key, suffix);\n        }).forEach((key) => {\n            this._callbacks.remove(key);\n        });\n    }\n\n    removeAllCallbacks() {\n        return this._callbacks.removeAll();\n    }\n\n    _trigger(eventName, event) {\n        this._handlers.get(eventName).forEach((callback) => {\n            //clickThru has to be sync, if not will be block by the popupblocker\n            if (eventName === 'AdClickThru') {\n                callback(event);\n            } else {\n                setTimeout(() => {\n                    if (this._handlers.get(eventName).length > 0) {\n                        callback(event);\n                    }\n                }, 0);\n            }\n        });\n    }\n\n    _callCallback(methodName, callbackID, err, result) {\n\n        let callback = this._callbacks.get(callbackID);\n\n        //not all methods callback's are mandatory\n        //but if there exist an error, fire the error event\n        if (!callback) {\n            if (err && callbackID === '') {\n                this.trigger(ERROR, err);\n            }\n            return;\n        }\n\n        $asyncCallback.call(this, callbackID, err, result);\n\n    }\n\n    _handShake(err, data) {\n        this._ready = true;\n        if (this._handShakeHandler) {\n            this._handShakeHandler(err, data);\n            delete this._handShakeHandler;\n        }\n    }\n\n    //methods like properties specific to this implementation of VPAID\n    getSize() {\n        return {width: this._width, height: this._height};\n    }\n    setSize(newWidth, newHeight) {\n        this._width = isPositiveInt(newWidth, this._width);\n        this._height = isPositiveInt(newHeight, this._height);\n        this._el.setAttribute('width', this._width);\n        this._el.setAttribute('height', this._height);\n    }\n    getWidth() {\n        return this._width;\n    }\n    setWidth(newWidth) {\n        this.setSize(newWidth, this._height);\n    }\n    getHeight() {\n        return this._height;\n    }\n    setHeight(newHeight) {\n        this.setSize(this._width, newHeight);\n    }\n    getFlashID() {\n        return this._flashID;\n    }\n    getFlashURL() {\n        return this._flashURL;\n    }\n    isReady() {\n        return this._ready;\n    }\n    destroy() {\n        this.offAll();\n        this.removeAllCallbacks();\n        registry.removeInstanceByID(this._flashID);\n        if (this._el.parentElement) {\n            this._el.parentElement.removeChild(this._el);\n        }\n    }\n}\n\nfunction $asyncCallback(callbackID, err, result) {\n    setTimeout(() => {\n        let callback = this._callbacks.get(callbackID);\n        if (callback) {\n            this._callbacks.remove(callbackID);\n            callback(err, result);\n        }\n    }, 0);\n}\n\nObject.defineProperty(JSFlashBridge, 'VPAID_FLASH_HANDLER', {\n    writable: false,\n    configurable: false,\n    value: VPAID_FLASH_HANDLER\n});\n\n/**\n * External interface handler\n *\n * @param {string} flashID identifier of the flash who call this\n * @param {string} typeID what type of message is, can be 'event' or 'callback'\n * @param {string} typeName if the typeID is a event the typeName will be the eventName, if is a callback the typeID is the methodName that is related this callback\n * @param {string} callbackID only applies when the typeID is 'callback', identifier of the callback to call\n * @param {object} error error object\n * @param {object} data\n */\nwindow[VPAID_FLASH_HANDLER] = (flashID, typeID, typeName, callbackID, error, data) => {\n    let instance = registry.getInstanceByID(flashID);\n    if (!instance) return;\n    if (typeName === 'handShake') {\n        instance._handShake(error, data);\n    } else {\n        if (typeID !== 'event') {\n            instance._callCallback(typeName, callbackID, error, data);\n        } else {\n            instance._trigger(typeName, data);\n        }\n    }\n};\nmodule.export = JSFlashBridge ;\n\n","'use strict';\nconst JSFlashBridgeRegistry = {};\n/*\nvar SingleValueRegistry = require('./registry').SingleValueRegistry;\nvar instances = new SingleValueRegistry();\n\n\n\nObject.defineProperty(JSFlashBridgeRegistry, 'addInstance', {\n    writable: false,\n    configurable: false,\n    value: function (id, instance) {\n        instances.add(id, instance);\n    }\n});\n\nObject.defineProperty(JSFlashBridgeRegistry, 'getInstanceByID', {\n    writable: false,\n    configurable: false,\n    value: function (id) {\n        return instances.get(id);\n    }\n});\n\nObject.defineProperty(JSFlashBridgeRegistry, 'removeInstanceByID', {\n    writable: false,\n    configurable: false,\n    value: function (id) {\n        return instances.remove(id);\n    }\n});\n*/\nmodule.exports = JSFlashBridgeRegistry;\n\n","'use strict';\n\nexport class MultipleValuesRegistry {\n    constructor () {\n        this._registries = {};\n    }\n    add (id, value) {\n        if (!this._registries[id]) {\n            this._registries[id] = [];\n        }\n        if (this._registries[id].indexOf(value) === -1) {\n            this._registries[id].push(value);\n        }\n    }\n    get (id) {\n        return this._registries[id] || [];\n    }\n    filterKeys (handler) {\n        return Object.keys(this._registries).filter(handler);\n    }\n    findByValue (value) {\n        var keys = Object.keys(this._registries).filter((key) => {\n            return this._registries[key].indexOf(value) !== -1;\n        });\n\n        return keys;\n    }\n    remove(key, value) {\n        if (!this._registries[key]) { return; }\n\n        var index = this._registries[key].indexOf(value);\n\n        if (index < 0) { return; }\n        return this._registries[key].splice(index, 1);\n    }\n    removeByKey (id) {\n        let old = this._registries[id];\n        delete this._registries[id];\n        return old;\n    }\n    removeByValue (value) {\n        let keys = this.findByValue(value);\n        return keys.map((key) => {\n            return this.remove(key, value);\n        });\n    }\n    removeAll() {\n        let old = this._registries;\n        this._registries = {};\n        return old;\n    }\n    size() {\n        return Object.keys(this._registries).length;\n    }\n}\n\nexport class SingleValueRegistry {\n    constructor () {\n        this._registries = {};\n    }\n    add (id, value) {\n        this._registries[id] = value;\n    }\n    get (id) {\n        return this._registries[id];\n    }\n    filterKeys (handler) {\n        return Object.keys(this._registries).filter(handler);\n    }\n    findByValue (value) {\n        var keys = Object.keys(this._registries).filter((key) => {\n            return this._registries[key] === value;\n        });\n\n        return keys;\n    }\n    remove (id) {\n        let old = this._registries[id];\n        delete this._registries[id];\n        return old;\n    }\n    removeByValue (value) {\n        let keys = this.findByValue(value);\n        return keys.map((key) => {\n            return this.remove(key);\n        });\n    }\n    removeAll() {\n        let old = this._registries;\n        this._registries = {};\n        return old;\n    }\n    size() {\n        return Object.keys(this._registries).length;\n    }\n}\n\n","'use strict';\n\nexport function unique(prefix) {\n    let count = -1;\n    return f => {\n        return `${prefix}_${++count}`;\n    };\n}\n\nexport function noop() {\n}\n\n\nexport function callbackTimeout(timer, onSuccess, onTimeout) {\n\n    let timeout = setTimeout(() => {\n\n        onSuccess = noop;\n        onTimeout();\n\n    }, timer);\n\n    return function () {\n        clearTimeout(timeout);\n        onSuccess.apply(this, arguments);\n    };\n}\n\n\nexport function createElementWithID(parent, id, cleanContent = false) {\n    var nEl = document.createElement('div');\n    nEl.id = id;\n    if (cleanContent) {\n        parent.innerHTML = '';\n    }\n    parent.appendChild(nEl);\n    return nEl;\n}\n\nexport function isPositiveInt(newVal, oldVal) {\n    return !isNaN(parseFloat(newVal)) && isFinite(newVal) && newVal > 0 ? newVal : oldVal;\n}\n\nlet endsWith = (function () {\n    if (String.prototype.endsWith) return String.prototype.endsWith;\n    return function endsWith (searchString, position) {\n        var subjectString = this.toString();\n        if (position === undefined || position > subjectString.length) {\n            position = subjectString.length;\n        }\n        position -= searchString.length;\n        var lastIndex = subjectString.indexOf(searchString, position);\n        return lastIndex !== -1 && lastIndex === position;\n    };\n})();\n\nexport function stringEndsWith(string, search) {\n    return endsWith.call(string, search);\n}\n\nexport function hideFlashEl(el) {\n    // can't use display none or visibility none because will block flash in some browsers\n    el.style.position = 'absolute';\n    el.style.left = '-1px';\n    el.style.top = '-1px';\n    el.style.width = '1px';\n    el.style.height = '1px';\n}\n","/*\tSWFObject v2.2 <http://code.google.com/p/swfobject/> \n\tis released under the MIT License <http://www.opensource.org/licenses/mit-license.php> \n*/\nvar swfobject=function(){var D=\"undefined\",r=\"object\",S=\"Shockwave Flash\",W=\"ShockwaveFlash.ShockwaveFlash\",q=\"application/x-shockwave-flash\",R=\"SWFObjectExprInst\",x=\"onreadystatechange\",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\\/(\\d+(\\.\\d+)?).*$/,\"$1\")):false,X=!+\"\\v1\",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\\s+(\\S+\\s+\\S+$)/,\"$1\");ag[0]=parseInt(ab.replace(/^(.*)\\..*$/,\"$1\"),10);ag[1]=parseInt(ab.replace(/^.*\\.(.*)\\s.*$/,\"$1\"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,\"$1\"),10):0}}else{if(typeof O[(['Active'].concat('Object').join('X'))]!=D){try{var ad=new window[(['Active'].concat('Object').join('X'))](W);if(ad){ab=ad.GetVariable(\"$version\");if(ab){X=true;ab=ab.split(\" \")[1].split(\",\");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if((typeof j.readyState!=D&&j.readyState==\"complete\")||(typeof j.readyState==D&&(j.getElementsByTagName(\"body\")[0]||j.body))){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener(\"DOMContentLoaded\",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState==\"complete\"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll(\"left\")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName(\"body\")[0].appendChild(C(\"span\"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener(\"load\",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener(\"load\",Y,false)}else{if(typeof O.attachEvent!=D){i(O,\"onload\",Y)}else{if(typeof O.onload==\"function\"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var X=j.getElementsByTagName(\"body\")[0];var aa=C(r);aa.setAttribute(\"type\",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable(\"$version\");if(ab){ab=ab.split(\" \")[1].split(\",\");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return}}X.removeChild(aa);Z=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute(\"width\")||\"0\";ai.height=ae.getAttribute(\"height\")||\"0\";if(ae.getAttribute(\"class\")){ai.styleclass=ae.getAttribute(\"class\")}if(ae.getAttribute(\"align\")){ai.align=ae.getAttribute(\"align\")}var ah={};var X=ae.getElementsByTagName(\"param\");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute(\"name\").toLowerCase()!=\"movie\"){ah[X[ad].getAttribute(\"name\")]=X[ad].getAttribute(\"value\")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName==\"OBJECT\"){if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}}return X}function A(){return !a&&F(\"6.0.65\")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName==\"OBJECT\"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width=\"310\"}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height=\"137\"}j.title=j.title.slice(0,47)+\" - Flash Player Installation\";var ad=M.ie&&M.win?(['Active'].concat('').join('X')):\"PlugIn\",ac=\"MMredirectURL=\"+O.location.toString().replace(/&/g,\"%26\")+\"&MMplayerType=\"+ad+\"&MMdoctitle=\"+j.title;if(typeof ab.flashvars!=D){ab.flashvars+=\"&\"+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C(\"div\");X+=\"SWFObjectNew\";Y.setAttribute(\"id\",X);ae.parentNode.insertBefore(Y,ae);ae.style.display=\"none\";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C(\"div\");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display=\"none\";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C(\"div\");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName==\"PARAM\")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ai.id==D){ai.id=Y}if(M.ie&&M.win){var ah=\"\";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()==\"data\"){ag.movie=ai[ae]}else{if(ae.toLowerCase()==\"styleclass\"){ah+=' class=\"'+ai[ae]+'\"'}else{if(ae.toLowerCase()!=\"classid\"){ah+=\" \"+ae+'=\"'+ai[ae]+'\"'}}}}}var af=\"\";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name=\"'+ad+'\" value=\"'+ag[ad]+'\" />'}}aa.outerHTML='<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\"'+ah+\">\"+af+\"</object>\";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute(\"type\",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()==\"styleclass\"){Z.setAttribute(\"class\",ai[ac])}else{if(ac.toLowerCase()!=\"classid\"){Z.setAttribute(ac,ai[ac])}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!=\"movie\"){e(Z,ab,ag[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C(\"param\");aa.setAttribute(\"name\",X);aa.setAttribute(\"value\",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName==\"OBJECT\"){if(M.ie&&M.win){X.style.display=\"none\";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]==\"function\"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(\".\");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return}var aa=j.getElementsByTagName(\"head\")[0];if(!aa){return}var X=(ad&&typeof ad==\"string\")?ad:\"screen\";if(ab){n=null;G=null}if(!n||G!=X){var Z=C(\"style\");Z.setAttribute(\"type\",\"text/css\");Z.setAttribute(\"media\",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+\" {\"+Y+\"}\"))}}}function w(Z,X){if(!m){return}var Y=X?\"visible\":\"hidden\";if(J&&c(Z)){c(Z).style.visibility=Y}else{v(\"#\"+Z,\"visibility:\"+Y)}}function L(Y){var Z=/[\\\\\\\"<>\\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent(\"onunload\",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in swfobject){swfobject[X]=null}swfobject=null})}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else{if(Z){Z({success:false,id:ab})}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+=\"\";ag+=\"\";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al]}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak]}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+=\"&\"+ai+\"=\"+Z[ai]}else{am.flashvars=ai+\"=\"+Z[ai]}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true)}X.success=true;X.ref=an}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else{w(ah,true)}}if(ac){ac(X)}})}else{if(ac){ac(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\\?/.test(Z)){Z=Z.split(\"?\")[1]}if(aa==null){return L(Z)}var Y=Z.split(\"&\");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf(\"=\"))==aa){return L(Y[X].substring((Y[X].indexOf(\"=\")+1)))}}}return\"\"},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display=\"block\"}}if(E){E(B)}}a=false}}}}();module.exports=swfobject;\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9WUEFJREZMQVNIQ2xpZW50LmpzIiwianMvanNGbGFzaEJyaWRnZS5qcyIsImpzL2pzRmxhc2hCcmlkZ2VSZWdpc3RyeS5qcyIsImpzL3JlZ2lzdHJ5LmpzIiwianMvdXRpbHMuanMiLCJub2RlX21vZHVsZXMvc3dmb2JqZWN0L2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7Ozs7QUFFQSxJQUFNLFlBQVksUUFBbEIsQUFBa0IsQUFBUTtBQUMxQixJQUFNLGdCQUFnQixRQUFBLEFBQVEsbUJBQTlCLEFBQWlEO0FBQ2pELEFBQ0E7O0lBQUEsQUFBTSxBQUFpQjs7OztBQUl2Qjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrS0EsaUJBQUEsQUFBaUIsWUFBakIsQUFBNkI7QUFDN0IsT0FBQSxBQUFPLFVBQVAsQUFBa0I7OztBQzVLbEI7Ozs7OztBQUVBLElBQUksU0FBUyxRQUFBLEFBQVEsV0FBckIsQUFBZ0M7QUFDaEMsSUFBSSxnQkFBZ0IsUUFBQSxBQUFRLFdBQTVCLEFBQXVDO0FBQ3ZDLElBQUksaUJBQWlCLFFBQUEsQUFBUSxXQUE3QixBQUF3QztBQUN4QyxJQUFJLHNCQUFzQixRQUFBLEFBQVEsY0FBbEMsQUFBZ0Q7QUFDaEQsSUFBSSx5QkFBeUIsUUFBQSxBQUFRLGNBQXJDLEFBQW1EO0FBQ25ELElBQU0sV0FBVyxRQUFqQixBQUFpQixBQUFRO0FBQ3pCLElBQU0sc0JBQU4sQUFBNEI7QUFDNUIsSUFBTSxRQUFOLEFBQWMsQUFFZDs7SUFBQSxBQUFNLEFBQWMsQUFDaEI7MkJBQUEsQUFBYSxJ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Q25FRDtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIid1c2Ugc3RyaWN0JztcblxuY29uc3Qgc3dmb2JqZWN0ID0gcmVxdWlyZSgnc3dmb2JqZWN0Jyk7XG5jb25zdCBKU0ZsYXNoQnJpZGdlID0gcmVxdWlyZSgnLi9qc0ZsYXNoQnJpZGdlJykuSlNGbGFzaEJyaWRnZTtcbi8vY29uc3QgVlBBSURBZFVuaXQgPSByZXF1aXJlKCcuL1ZQQUlEQWRVbml0JykuVlBBSURBZFVuaXQ7XG5jbGFzcyBWUEFJREZMQVNIQ2xpZW50IHtcbn1cblxuXG4vKlxuXG5cbmNvbnN0IG5vb3AgPSByZXF1aXJlKCcuL3V0aWxzJykubm9vcDtcbmNvbnN0IGNhbGxiYWNrVGltZW91dCA9IHJlcXVpcmUoJy4vdXRpbHMnKS5jYWxsYmFja1RpbWVvdXQ7XG5jb25zdCBpc1Bvc2l0aXZlSW50ID0gcmVxdWlyZSgnLi91dGlscycpLmlzUG9zaXRpdmVJbnQ7XG5jb25zdCBjcmVhdGVFbGVtZW50V2l0aElEID0gcmVxdWlyZSgnLi91dGlscycpLmNyZWF0ZUVsZW1lbnRXaXRoSUQ7XG5jb25zdCB1bmlxdWVWUEFJRCA9IHJlcXVpcmUoJy4vdXRpbHMnKS51bmlxdWUoJ3ZwYWlkJyk7XG5jb25zdCBjcmVhdGVGbGFzaFRlc3RlciA9IHJlcXVpcmUoJy4vZmxhc2hUZXN0ZXIuanMnKS5jcmVhdGVGbGFzaFRlc3RlcjtcblxuY29uc3QgRVJST1IgPSAnZXJyb3InO1xuY29uc3QgRkxBU0hfVkVSU0lPTiA9ICcxMC4xLjAnO1xuXG5sZXQgZmxhc2hUZXN0ZXIgPSB7aXNTdXBwb3J0ZWQ6ICgpPT4gdHJ1ZX07IC8vIGlmIHRoZSBydW5GbGFzaFRlc3QgaXMgbm90IHJ1biB0aGUgZmxhc2hUZXN0ZXIgd2lsbCBhbHdheXMgcmV0dXJuIHRydWVcblxuY2xhc3MgVlBBSURGTEFTSENsaWVudCB7XG4gICAgY29uc3RydWN0b3IgKHZwYWlkUGFyZW50RWwsIGNhbGxiYWNrLCBzd2ZDb25maWcgPSB7ZGF0YTogJ1ZQQUlERmxhc2guc3dmJywgd2lkdGg6IDgwMCwgaGVpZ2h0OiA0MDB9LCBwYXJhbXMgPSB7IHdtb2RlOiAndHJhbnNwYXJlbnQnLCBzYWxpZ246ICd0bCcsIGFsaWduOiAnbGVmdCcsIGFsbG93U2NyaXB0QWNjZXNzOiAnYWx3YXlzJywgc2NhbGU6ICdub1NjYWxlJywgYWxsb3dGdWxsU2NyZWVuOiAndHJ1ZScsIHF1YWxpdHk6ICdoaWdoJ30sIHZwYWlkT3B0aW9ucyA9IHsgZGVidWc6IGZhbHNlLCB0aW1lb3V0OiAxMDAwMCB9KSB7XG5cbiAgICAgICAgdmFyIG1lID0gdGhpcztcblxuICAgICAgICB0aGlzLl92cGFpZFBhcmVudEVsID0gdnBhaWRQYXJlbnRFbDtcbiAgICAgICAgdGhpcy5fZmxhc2hJRCA9IHVuaXF1ZVZQQUlEKCk7XG4gICAgICAgIHRoaXMuX2Rlc3Ryb3llZCA9IGZhbHNlO1xuICAgICAgICBjYWxsYmFjayA9IGNhbGxiYWNrIHx8IG5vb3A7XG5cbiAgICAgICAgc3dmQ29uZmlnLndpZHRoID0gaXNQb3NpdGl2ZUludChzd2ZDb25maWcud2lkdGgsIDgwMCk7XG4gICAgICAgIHN3ZkNvbmZpZy5oZWlnaHQgPSBpc1Bvc2l0aXZlSW50KHN3ZkNvbmZpZy5oZWlnaHQsIDQwMCk7XG5cbiAgICAgICAgY3JlYXRlRWxlbWVudFdpdGhJRCh2cGFpZFBhcmVudEVsLCB0aGlzLl9mbGFzaElELCB0cnVlKTtcblxuICAgICAgICBwYXJhbXMubW92aWUgPSBzd2ZDb25maWcuZGF0YTtcbiAgICAgICAgcGFyYW1zLkZsYXNoVmFycyA9IGBmbGFzaGlkPSR7dGhpcy5fZmxhc2hJRH0maGFuZGxlcj0ke0pTRmxhc2hCcmlkZ2UuVlBBSURfRkxBU0hfSEFORExFUn0mZGVidWc9JHt2cGFpZE9wdGlvbnMuZGVidWd9JnNhbGlnbj0ke3BhcmFtcy5zYWxpZ259YDtcblxuICAgICAgICBpZiAoIVZQQUlERkxBU0hDbGllbnQuaXNTdXBwb3J0ZWQoKSkge1xuICAgICAgICAgICAgcmV0dXJuIG9uRXJyb3IoJ3VzZXIgZG9uXFwndCBzdXBwb3J0IGZsYXNoIG9yIGRvZXNuXFwndCBoYXZlIHRoZSBtaW5pbXVtIHJlcXVpcmVkIHZlcnNpb24gb2YgZmxhc2ggJyArIEZMQVNIX1ZFUlNJT04pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5lbCA9IHN3Zm9iamVjdC5jcmVhdGVTV0Yoc3dmQ29uZmlnLCBwYXJhbXMsIHRoaXMuX2ZsYXNoSUQpO1xuXG4gICAgICAgIGlmICghdGhpcy5lbCkge1xuICAgICAgICAgICAgcmV0dXJuIG9uRXJyb3IoICdzd2ZvYmplY3QgZmFpbGVkIHRvIGNyZWF0ZSBvYmplY3QgaW4gZWxlbWVudCcgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBoYW5kbGVyID0gY2FsbGJhY2tUaW1lb3V0KHZwYWlkT3B0aW9ucy50aW1lb3V0LFxuICAgICAgICAgICAgKGVyciwgZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICRsb2FkUGVuZGVkQWRVbml0LmNhbGwodGhpcyk7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyLCBkYXRhKTtcbiAgICAgICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygndnBhaWQgZmxhc2ggbG9hZCB0aW1lb3V0ICcgKyB2cGFpZE9wdGlvbnMudGltZW91dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5fZmxhc2ggPSBuZXcgSlNGbGFzaEJyaWRnZSh0aGlzLmVsLCBzd2ZDb25maWcuZGF0YSwgdGhpcy5fZmxhc2hJRCwgc3dmQ29uZmlnLndpZHRoLCBzd2ZDb25maWcuaGVpZ2h0LCBoYW5kbGVyKTtcblxuICAgICAgICBmdW5jdGlvbiBvbkVycm9yKGVycm9yKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoZXJyb3IpKTtcbiAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgcmV0dXJuIG1lO1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBkZXN0cm95ICgpIHtcbiAgICAgICAgdGhpcy5fZGVzdHJveUFkVW5pdCgpO1xuXG4gICAgICAgIGlmICh0aGlzLl9mbGFzaCkge1xuICAgICAgICAgICAgdGhpcy5fZmxhc2guZGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy5fZmxhc2ggPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZWwgPSBudWxsO1xuICAgICAgICB0aGlzLl9kZXN0cm95ZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGlzRGVzdHJveWVkICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Rlc3Ryb3llZDtcbiAgICB9XG5cbiAgICBfZGVzdHJveUFkVW5pdCgpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuX2xvYWRMYXRlcjtcblxuICAgICAgICBpZiAodGhpcy5fYWRVbml0TG9hZCkge1xuICAgICAgICAgICAgdGhpcy5fYWRVbml0TG9hZCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLl9mbGFzaC5yZW1vdmVDYWxsYmFjayh0aGlzLl9hZFVuaXRMb2FkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9hZFVuaXQpIHtcbiAgICAgICAgICAgIHRoaXMuX2FkVW5pdC5fZGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy5fYWRVbml0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxvYWRBZFVuaXQoYWRVUkwsIGNhbGxiYWNrKSB7XG4gICAgICAgICR0aHJvd0lmRGVzdHJveWVkLmNhbGwodGhpcyk7XG5cbiAgICAgICAgaWYgKHRoaXMuX2FkVW5pdCkge1xuICAgICAgICAgICAgdGhpcy5fZGVzdHJveUFkVW5pdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2ZsYXNoLmlzUmVhZHkoKSkge1xuICAgICAgICAgICAgdGhpcy5fYWRVbml0TG9hZCA9IChlcnIsIG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWVycikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hZFVuaXQgPSBuZXcgVlBBSURBZFVuaXQodGhpcy5fZmxhc2gpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9hZFVuaXRMb2FkID0gbnVsbDtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnIsIHRoaXMuX2FkVW5pdCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLl9mbGFzaC5jYWxsRmxhc2hNZXRob2QoJ2xvYWRBZFVuaXQnLCBbYWRVUkxdLCB0aGlzLl9hZFVuaXRMb2FkKTtcbiAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fbG9hZExhdGVyID0ge3VybDogYWRVUkwsIGNhbGxiYWNrfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVubG9hZEFkVW5pdChjYWxsYmFjayA9IHVuZGVmaW5lZCkge1xuICAgICAgICAkdGhyb3dJZkRlc3Ryb3llZC5jYWxsKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuX2Rlc3Ryb3lBZFVuaXQoKTtcbiAgICAgICAgdGhpcy5fZmxhc2guY2FsbEZsYXNoTWV0aG9kKCd1bmxvYWRBZFVuaXQnLCBbXSwgY2FsbGJhY2spO1xuICAgIH1cbiAgICBnZXRGbGFzaElEKCkge1xuICAgICAgICAkdGhyb3dJZkRlc3Ryb3llZC5jYWxsKHRoaXMpO1xuICAgICAgICByZXR1cm4gdGhpcy5fZmxhc2guZ2V0Rmxhc2hJRCgpO1xuICAgIH1cbiAgICBnZXRGbGFzaFVSTCgpIHtcbiAgICAgICAgJHRocm93SWZEZXN0cm95ZWQuY2FsbCh0aGlzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZsYXNoLmdldEZsYXNoVVJMKCk7XG4gICAgfVxuXHRcbn1cblxuc2V0U3RhdGljUHJvcGVydHkoJ2lzU3VwcG9ydGVkJywgKCkgPT4ge1xuICAgIHJldHVybiBzd2ZvYmplY3QuaGFzRmxhc2hQbGF5ZXJWZXJzaW9uKEZMQVNIX1ZFUlNJT04pICYmIGZsYXNoVGVzdGVyLmlzU3VwcG9ydGVkKCk7XG59LCB0cnVlKTtcblxuc2V0U3RhdGljUHJvcGVydHkoJ3J1bkZsYXNoVGVzdCcsIChzd2ZDb25maWcpID0+IHtcbiAgICBmbGFzaFRlc3RlciA9IGNyZWF0ZUZsYXNoVGVzdGVyKGRvY3VtZW50LmJvZHksIHN3ZkNvbmZpZyk7XG59KTtcblxuZnVuY3Rpb24gJHRocm93SWZEZXN0cm95ZWQoKSB7XG4gICAgaWYodGhpcy5fZGVzdHJveWVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVlBBSURGbGFzaFRvSlMgaXMgZGVzdHJveWVkIScpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gJGxvYWRQZW5kZWRBZFVuaXQoKSB7XG4gICAgaWYgKHRoaXMuX2xvYWRMYXRlcikge1xuICAgICAgICB0aGlzLmxvYWRBZFVuaXQodGhpcy5fbG9hZExhdGVyLnVybCwgdGhpcy5fbG9hZExhdGVyLmNhbGxiYWNrKTtcbiAgICAgICAgZGVsZXRlIHRoaXMuX2xvYWRMYXRlcjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHNldFN0YXRpY1Byb3BlcnR5KHByb3BlcnR5TmFtZSwgdmFsdWUsIHdyaXRhYmxlID0gZmFsc2UpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVlBBSURGTEFTSENsaWVudCwgcHJvcGVydHlOYW1lLCB7XG4gICAgICAgIHdyaXRhYmxlOiB3cml0YWJsZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgfSk7XG59XG5cblxuKi9cblZQQUlERkxBU0hDbGllbnQuc3dmb2JqZWN0ID0gc3dmb2JqZWN0O1xubW9kdWxlLmV4cG9ydHMgPSAgVlBBSURGTEFTSENsaWVudDtcbiIsIid1c2Ugc3RyaWN0JztcblxubGV0IHVuaXF1ZSA9IHJlcXVpcmUoJy4vdXRpbHMnKS51bmlxdWU7XG5sZXQgaXNQb3NpdGl2ZUludCA9IHJlcXVpcmUoJy4vdXRpbHMnKS5pc1Bvc2l0aXZlSW50O1xubGV0IHN0cmluZ0VuZHNXaXRoID0gcmVxdWlyZSgnLi91dGlscycpLnN0cmluZ0VuZHNXaXRoO1xubGV0IFNpbmdsZVZhbHVlUmVnaXN0cnkgPSByZXF1aXJlKCcuL3JlZ2lzdHJ5JykuU2luZ2xlVmFsdWVSZWdpc3RyeTtcbmxldCBNdWx0aXBsZVZhbHVlc1JlZ2lzdHJ5ID0gcmVxdWlyZSgnLi9yZWdpc3RyeScpLk11bHRpcGxlVmFsdWVzUmVnaXN0cnk7XG5jb25zdCByZWdpc3RyeSA9IHJlcXVpcmUoJy4vanNGbGFzaEJyaWRnZVJlZ2lzdHJ5Jyk7XG5jb25zdCBWUEFJRF9GTEFTSF9IQU5ETEVSID0gJ3ZwYWlkX3ZpZGVvX2ZsYXNoX2hhbmRsZXInO1xuY29uc3QgRVJST1IgPSAnQWRFcnJvcic7XG5cbmNsYXNzIEpTRmxhc2hCcmlkZ2Uge1xuICAgIGNvbnN0cnVjdG9yIChlbCwgZmxhc2hVUkwsIGZsYXNoSUQsIHdpZHRoLCBoZWlnaHQsIGxvYWRIYW5kU2hha2UpIHtcbiAgICAgICAgdGhpcy5fZWwgPSBlbDtcbiAgICAgICAgdGhpcy5fZmxhc2hJRCA9IGZsYXNoSUQ7XG4gICAgICAgIHRoaXMuX2ZsYXNoVVJMID0gZmxhc2hVUkw7XG4gICAgICAgIHRoaXMuX3dpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuX2hlaWdodCA9IGhlaWdodDtcbiAgICAgICAgdGhpcy5faGFuZGxlcnMgPSBuZXcgTXVsdGlwbGVWYWx1ZXNSZWdpc3RyeSgpO1xuICAgICAgICB0aGlzLl9jYWxsYmFja3MgPSBuZXcgU2luZ2xlVmFsdWVSZWdpc3RyeSgpO1xuICAgICAgICB0aGlzLl91bmlxdWVNZXRob2RJZGVudGlmaWVyID0gdW5pcXVlKHRoaXMuX2ZsYXNoSUQpO1xuICAgICAgICB0aGlzLl9yZWFkeSA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9oYW5kU2hha2VIYW5kbGVyID0gbG9hZEhhbmRTaGFrZTtcblxuICAgICAgICByZWdpc3RyeS5hZGRJbnN0YW5jZSh0aGlzLl9mbGFzaElELCB0aGlzKTtcbiAgICB9XG5cbiAgICBvbihldmVudE5hbWUsIGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZXJzLmFkZChldmVudE5hbWUsIGNhbGxiYWNrKTtcbiAgICB9XG5cbiAgICBvZmYoZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gdGhpcy5faGFuZGxlcnMucmVtb3ZlKGV2ZW50TmFtZSwgY2FsbGJhY2spO1xuICAgIH1cblxuICAgIG9mZkV2ZW50KGV2ZW50TmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5faGFuZGxlcnMucmVtb3ZlQnlLZXkoZXZlbnROYW1lKTtcbiAgICB9XG5cbiAgICBvZmZBbGwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9oYW5kbGVycy5yZW1vdmVBbGwoKTtcbiAgICB9XG5cbiAgICBjYWxsRmxhc2hNZXRob2QobWV0aG9kTmFtZSwgYXJncyA9IFtdLCBjYWxsYmFjayA9IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgY2FsbGJhY2tJRCA9ICcnO1xuICAgICAgICAvLyBpZiBubyBjYWxsYmFjaywgc29tZSBtZXRob2RzIHRoZSByZXR1cm4gaXMgdm9pZCBzbyB0aGV5IGRvbid0IG5lZWQgY2FsbGJhY2tcbiAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBjYWxsYmFja0lEID0gYCR7dGhpcy5fdW5pcXVlTWV0aG9kSWRlbnRpZmllcigpfV8ke21ldGhvZE5hbWV9YDtcbiAgICAgICAgICAgIHRoaXMuX2NhbGxiYWNrcy5hZGQoY2FsbGJhY2tJRCwgY2FsbGJhY2spO1xuICAgICAgICB9XG5cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy9tZXRob2RzIGFyZSBjcmVhdGVkIGJ5IEV4dGVybmFsSW50ZXJmYWNlLmFkZENhbGxiYWNrIGluIGFzMyBjb2RlLCBpZiBmb3Igc29tZSByZWFzb24gaXQgZmFpbGVkXG4gICAgICAgICAgICAvL3RoaXMgY29kZSB3aWxsIHRocm93IGFuIGVycm9yXG4gICAgICAgICAgICB0aGlzLl9lbFttZXRob2ROYW1lXShbY2FsbGJhY2tJRF0uY29uY2F0KGFyZ3MpKTtcblxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAkYXN5bmNDYWxsYmFjay5jYWxsKHRoaXMsIGNhbGxiYWNrSUQsIGUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgIC8vaWYgdGhlcmUgaXNuJ3QgYW55IGNhbGxiYWNrIHRvIHJldHVybiBlcnJvciB1c2UgZXJyb3IgZXZlbnQgaGFuZGxlclxuICAgICAgICAgICAgICAgIHRoaXMuX3RyaWdnZXIoRVJST1IsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVtb3ZlQ2FsbGJhY2soY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbGxiYWNrcy5yZW1vdmVCeVZhbHVlKGNhbGxiYWNrKTtcbiAgICB9XG5cbiAgICByZW1vdmVDYWxsYmFja0J5TWV0aG9kTmFtZShzdWZmaXgpIHtcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tzLmZpbHRlcktleXMoKGtleSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHN0cmluZ0VuZHNXaXRoKGtleSwgc3VmZml4KTtcbiAgICAgICAgfSkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9jYWxsYmFja3MucmVtb3ZlKGtleSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbW92ZUFsbENhbGxiYWNrcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbGxiYWNrcy5yZW1vdmVBbGwoKTtcbiAgICB9XG5cbiAgICBfdHJpZ2dlcihldmVudE5hbWUsIGV2ZW50KSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZXJzLmdldChldmVudE5hbWUpLmZvckVhY2goKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgICAvL2NsaWNrVGhydSBoYXMgdG8gYmUgc3luYywgaWYgbm90IHdpbGwgYmUgYmxvY2sgYnkgdGhlIHBvcHVwYmxvY2tlclxuICAgICAgICAgICAgaWYgKGV2ZW50TmFtZSA9PT0gJ0FkQ2xpY2tUaHJ1Jykge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGV2ZW50KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9oYW5kbGVycy5nZXQoZXZlbnROYW1lKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgX2NhbGxDYWxsYmFjayhtZXRob2ROYW1lLCBjYWxsYmFja0lELCBlcnIsIHJlc3VsdCkge1xuXG4gICAgICAgIGxldCBjYWxsYmFjayA9IHRoaXMuX2NhbGxiYWNrcy5nZXQoY2FsbGJhY2tJRCk7XG5cbiAgICAgICAgLy9ub3QgYWxsIG1ldGhvZHMgY2FsbGJhY2sncyBhcmUgbWFuZGF0b3J5XG4gICAgICAgIC8vYnV0IGlmIHRoZXJlIGV4aXN0IGFuIGVycm9yLCBmaXJlIHRoZSBlcnJvciBldmVudFxuICAgICAgICBpZiAoIWNhbGxiYWNrKSB7XG4gICAgICAgICAgICBpZiAoZXJyICYmIGNhbGxiYWNrSUQgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKEVSUk9SLCBlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgJGFzeW5jQ2FsbGJhY2suY2FsbCh0aGlzLCBjYWxsYmFja0lELCBlcnIsIHJlc3VsdCk7XG5cbiAgICB9XG5cbiAgICBfaGFuZFNoYWtlKGVyciwgZGF0YSkge1xuICAgICAgICB0aGlzLl9yZWFkeSA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLl9oYW5kU2hha2VIYW5kbGVyKSB7XG4gICAgICAgICAgICB0aGlzLl9oYW5kU2hha2VIYW5kbGVyKGVyciwgZGF0YSk7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5faGFuZFNoYWtlSGFuZGxlcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vbWV0aG9kcyBsaWtlIHByb3BlcnRpZXMgc3BlY2lmaWMgdG8gdGhpcyBpbXBsZW1lbnRhdGlvbiBvZiBWUEFJRFxuICAgIGdldFNpemUoKSB7XG4gICAgICAgIHJldHVybiB7d2lkdGg6IHRoaXMuX3dpZHRoLCBoZWlnaHQ6IHRoaXMuX2hlaWdodH07XG4gICAgfVxuICAgIHNldFNpemUobmV3V2lkdGgsIG5ld0hlaWdodCkge1xuICAgICAgICB0aGlzLl93aWR0aCA9IGlzUG9zaXRpdmVJbnQobmV3V2lkdGgsIHRoaXMuX3dpZHRoKTtcbiAgICAgICAgdGhpcy5faGVpZ2h0ID0gaXNQb3NpdGl2ZUludChuZXdIZWlnaHQsIHRoaXMuX2hlaWdodCk7XG4gICAgICAgIHRoaXMuX2VsLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCB0aGlzLl93aWR0aCk7XG4gICAgICAgIHRoaXMuX2VsLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgdGhpcy5faGVpZ2h0KTtcbiAgICB9XG4gICAgZ2V0V2lkdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl93aWR0aDtcbiAgICB9XG4gICAgc2V0V2lkdGgobmV3V2lkdGgpIHtcbiAgICAgICAgdGhpcy5zZXRTaXplKG5ld1dpZHRoLCB0aGlzLl9oZWlnaHQpO1xuICAgIH1cbiAgICBnZXRIZWlnaHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XG4gICAgfVxuICAgIHNldEhlaWdodChuZXdIZWlnaHQpIHtcbiAgICAgICAgdGhpcy5zZXRTaXplKHRoaXMuX3dpZHRoLCBuZXdIZWlnaHQpO1xuICAgIH1cbiAgICBnZXRGbGFzaElEKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZmxhc2hJRDtcbiAgICB9XG4gICAgZ2V0Rmxhc2hVUkwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mbGFzaFVSTDtcbiAgICB9XG4gICAgaXNSZWFkeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlYWR5O1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLm9mZkFsbCgpO1xuICAgICAgICB0aGlzLnJlbW92ZUFsbENhbGxiYWNrcygpO1xuICAgICAgICByZWdpc3RyeS5yZW1vdmVJbnN0YW5jZUJ5SUQodGhpcy5fZmxhc2hJRCk7XG4gICAgICAgIGlmICh0aGlzLl9lbC5wYXJlbnRFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLl9lbC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuX2VsKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gJGFzeW5jQ2FsbGJhY2soY2FsbGJhY2tJRCwgZXJyLCByZXN1bHQpIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgbGV0IGNhbGxiYWNrID0gdGhpcy5fY2FsbGJhY2tzLmdldChjYWxsYmFja0lEKTtcbiAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICB0aGlzLl9jYWxsYmFja3MucmVtb3ZlKGNhbGxiYWNrSUQpO1xuICAgICAgICAgICAgY2FsbGJhY2soZXJyLCByZXN1bHQpO1xuICAgICAgICB9XG4gICAgfSwgMCk7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShKU0ZsYXNoQnJpZGdlLCAnVlBBSURfRkxBU0hfSEFORExFUicsIHtcbiAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICB2YWx1ZTogVlBBSURfRkxBU0hfSEFORExFUlxufSk7XG5cbi8qKlxuICogRXh0ZXJuYWwgaW50ZXJmYWNlIGhhbmRsZXJcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZmxhc2hJRCBpZGVudGlmaWVyIG9mIHRoZSBmbGFzaCB3aG8gY2FsbCB0aGlzXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZUlEIHdoYXQgdHlwZSBvZiBtZXNzYWdlIGlzLCBjYW4gYmUgJ2V2ZW50JyBvciAnY2FsbGJhY2snXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZU5hbWUgaWYgdGhlIHR5cGVJRCBpcyBhIGV2ZW50IHRoZSB0eXBlTmFtZSB3aWxsIGJlIHRoZSBldmVudE5hbWUsIGlmIGlzIGEgY2FsbGJhY2sgdGhlIHR5cGVJRCBpcyB0aGUgbWV0aG9kTmFtZSB0aGF0IGlzIHJlbGF0ZWQgdGhpcyBjYWxsYmFja1xuICogQHBhcmFtIHtzdHJpbmd9IGNhbGxiYWNrSUQgb25seSBhcHBsaWVzIHdoZW4gdGhlIHR5cGVJRCBpcyAnY2FsbGJhY2snLCBpZGVudGlmaWVyIG9mIHRoZSBjYWxsYmFjayB0byBjYWxsXG4gKiBAcGFyYW0ge29iamVjdH0gZXJyb3IgZXJyb3Igb2JqZWN0XG4gKiBAcGFyYW0ge29iamVjdH0gZGF0YVxuICovXG53aW5kb3dbVlBBSURfRkxBU0hfSEFORExFUl0gPSAoZmxhc2hJRCwgdHlwZUlELCB0eXBlTmFtZSwgY2FsbGJhY2tJRCwgZXJyb3IsIGRhdGEpID0+IHtcbiAgICBsZXQgaW5zdGFuY2UgPSByZWdpc3RyeS5nZXRJbnN0YW5jZUJ5SUQoZmxhc2hJRCk7XG4gICAgaWYgKCFpbnN0YW5jZSkgcmV0dXJuO1xuICAgIGlmICh0eXBlTmFtZSA9PT0gJ2hhbmRTaGFrZScpIHtcbiAgICAgICAgaW5zdGFuY2UuX2hhbmRTaGFrZShlcnJvciwgZGF0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHR5cGVJRCAhPT0gJ2V2ZW50Jykge1xuICAgICAgICAgICAgaW5zdGFuY2UuX2NhbGxDYWxsYmFjayh0eXBlTmFtZSwgY2FsbGJhY2tJRCwgZXJyb3IsIGRhdGEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW5zdGFuY2UuX3RyaWdnZXIodHlwZU5hbWUsIGRhdGEpO1xuICAgICAgICB9XG4gICAgfVxufTtcbm1vZHVsZS5leHBvcnQgPSBKU0ZsYXNoQnJpZGdlIDtcblxuIiwiJ3VzZSBzdHJpY3QnO1xuY29uc3QgSlNGbGFzaEJyaWRnZVJlZ2lzdHJ5ID0ge307XG4vKlxudmFyIFNpbmdsZVZhbHVlUmVnaXN0cnkgPSByZXF1aXJlKCcuL3JlZ2lzdHJ5JykuU2luZ2xlVmFsdWVSZWdpc3RyeTtcbnZhciBpbnN0YW5jZXMgPSBuZXcgU2luZ2xlVmFsdWVSZWdpc3RyeSgpO1xuXG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KEpTRmxhc2hCcmlkZ2VSZWdpc3RyeSwgJ2FkZEluc3RhbmNlJywge1xuICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgIHZhbHVlOiBmdW5jdGlvbiAoaWQsIGluc3RhbmNlKSB7XG4gICAgICAgIGluc3RhbmNlcy5hZGQoaWQsIGluc3RhbmNlKTtcbiAgICB9XG59KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KEpTRmxhc2hCcmlkZ2VSZWdpc3RyeSwgJ2dldEluc3RhbmNlQnlJRCcsIHtcbiAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICB2YWx1ZTogZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHJldHVybiBpbnN0YW5jZXMuZ2V0KGlkKTtcbiAgICB9XG59KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KEpTRmxhc2hCcmlkZ2VSZWdpc3RyeSwgJ3JlbW92ZUluc3RhbmNlQnlJRCcsIHtcbiAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICB2YWx1ZTogZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHJldHVybiBpbnN0YW5jZXMucmVtb3ZlKGlkKTtcbiAgICB9XG59KTtcbiovXG5tb2R1bGUuZXhwb3J0cyA9IEpTRmxhc2hCcmlkZ2VSZWdpc3RyeTtcblxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnQgY2xhc3MgTXVsdGlwbGVWYWx1ZXNSZWdpc3RyeSB7XG4gICAgY29uc3RydWN0b3IgKCkge1xuICAgICAgICB0aGlzLl9yZWdpc3RyaWVzID0ge307XG4gICAgfVxuICAgIGFkZCAoaWQsIHZhbHVlKSB7XG4gICAgICAgIGlmICghdGhpcy5fcmVnaXN0cmllc1tpZF0pIHtcbiAgICAgICAgICAgIHRoaXMuX3JlZ2lzdHJpZXNbaWRdID0gW107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX3JlZ2lzdHJpZXNbaWRdLmluZGV4T2YodmFsdWUpID09PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5fcmVnaXN0cmllc1tpZF0ucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IChpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVnaXN0cmllc1tpZF0gfHwgW107XG4gICAgfVxuICAgIGZpbHRlcktleXMgKGhhbmRsZXIpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuX3JlZ2lzdHJpZXMpLmZpbHRlcihoYW5kbGVyKTtcbiAgICB9XG4gICAgZmluZEJ5VmFsdWUgKHZhbHVlKSB7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModGhpcy5fcmVnaXN0cmllcykuZmlsdGVyKChrZXkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZWdpc3RyaWVzW2tleV0uaW5kZXhPZih2YWx1ZSkgIT09IC0xO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4ga2V5cztcbiAgICB9XG4gICAgcmVtb3ZlKGtleSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9yZWdpc3RyaWVzW2tleV0pIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5fcmVnaXN0cmllc1trZXldLmluZGV4T2YodmFsdWUpO1xuXG4gICAgICAgIGlmIChpbmRleCA8IDApIHsgcmV0dXJuOyB9XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWdpc3RyaWVzW2tleV0uc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG4gICAgcmVtb3ZlQnlLZXkgKGlkKSB7XG4gICAgICAgIGxldCBvbGQgPSB0aGlzLl9yZWdpc3RyaWVzW2lkXTtcbiAgICAgICAgZGVsZXRlIHRoaXMuX3JlZ2lzdHJpZXNbaWRdO1xuICAgICAgICByZXR1cm4gb2xkO1xuICAgIH1cbiAgICByZW1vdmVCeVZhbHVlICh2YWx1ZSkge1xuICAgICAgICBsZXQga2V5cyA9IHRoaXMuZmluZEJ5VmFsdWUodmFsdWUpO1xuICAgICAgICByZXR1cm4ga2V5cy5tYXAoKGtleSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlKGtleSwgdmFsdWUpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVtb3ZlQWxsKCkge1xuICAgICAgICBsZXQgb2xkID0gdGhpcy5fcmVnaXN0cmllcztcbiAgICAgICAgdGhpcy5fcmVnaXN0cmllcyA9IHt9O1xuICAgICAgICByZXR1cm4gb2xkO1xuICAgIH1cbiAgICBzaXplKCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5fcmVnaXN0cmllcykubGVuZ3RoO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFNpbmdsZVZhbHVlUmVnaXN0cnkge1xuICAgIGNvbnN0cnVjdG9yICgpIHtcbiAgICAgICAgdGhpcy5fcmVnaXN0cmllcyA9IHt9O1xuICAgIH1cbiAgICBhZGQgKGlkLCB2YWx1ZSkge1xuICAgICAgICB0aGlzLl9yZWdpc3RyaWVzW2lkXSA9IHZhbHVlO1xuICAgIH1cbiAgICBnZXQgKGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWdpc3RyaWVzW2lkXTtcbiAgICB9XG4gICAgZmlsdGVyS2V5cyAoaGFuZGxlcikge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5fcmVnaXN0cmllcykuZmlsdGVyKGhhbmRsZXIpO1xuICAgIH1cbiAgICBmaW5kQnlWYWx1ZSAodmFsdWUpIHtcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLl9yZWdpc3RyaWVzKS5maWx0ZXIoKGtleSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlZ2lzdHJpZXNba2V5XSA9PT0gdmFsdWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBrZXlzO1xuICAgIH1cbiAgICByZW1vdmUgKGlkKSB7XG4gICAgICAgIGxldCBvbGQgPSB0aGlzLl9yZWdpc3RyaWVzW2lkXTtcbiAgICAgICAgZGVsZXRlIHRoaXMuX3JlZ2lzdHJpZXNbaWRdO1xuICAgICAgICByZXR1cm4gb2xkO1xuICAgIH1cbiAgICByZW1vdmVCeVZhbHVlICh2YWx1ZSkge1xuICAgICAgICBsZXQga2V5cyA9IHRoaXMuZmluZEJ5VmFsdWUodmFsdWUpO1xuICAgICAgICByZXR1cm4ga2V5cy5tYXAoKGtleSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlKGtleSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZW1vdmVBbGwoKSB7XG4gICAgICAgIGxldCBvbGQgPSB0aGlzLl9yZWdpc3RyaWVzO1xuICAgICAgICB0aGlzLl9yZWdpc3RyaWVzID0ge307XG4gICAgICAgIHJldHVybiBvbGQ7XG4gICAgfVxuICAgIHNpemUoKSB7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLl9yZWdpc3RyaWVzKS5sZW5ndGg7XG4gICAgfVxufVxuXG4iLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydCBmdW5jdGlvbiB1bmlxdWUocHJlZml4KSB7XG4gICAgbGV0IGNvdW50ID0gLTE7XG4gICAgcmV0dXJuIGYgPT4ge1xuICAgICAgICByZXR1cm4gYCR7cHJlZml4fV8keysrY291bnR9YDtcbiAgICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbm9vcCgpIHtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gY2FsbGJhY2tUaW1lb3V0KHRpbWVyLCBvblN1Y2Nlc3MsIG9uVGltZW91dCkge1xuXG4gICAgbGV0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcblxuICAgICAgICBvblN1Y2Nlc3MgPSBub29wO1xuICAgICAgICBvblRpbWVvdXQoKTtcblxuICAgIH0sIHRpbWVyKTtcblxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgb25TdWNjZXNzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudFdpdGhJRChwYXJlbnQsIGlkLCBjbGVhbkNvbnRlbnQgPSBmYWxzZSkge1xuICAgIHZhciBuRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBuRWwuaWQgPSBpZDtcbiAgICBpZiAoY2xlYW5Db250ZW50KSB7XG4gICAgICAgIHBhcmVudC5pbm5lckhUTUwgPSAnJztcbiAgICB9XG4gICAgcGFyZW50LmFwcGVuZENoaWxkKG5FbCk7XG4gICAgcmV0dXJuIG5FbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUG9zaXRpdmVJbnQobmV3VmFsLCBvbGRWYWwpIHtcbiAgICByZXR1cm4gIWlzTmFOKHBhcnNlRmxvYXQobmV3VmFsKSkgJiYgaXNGaW5pdGUobmV3VmFsKSAmJiBuZXdWYWwgPiAwID8gbmV3VmFsIDogb2xkVmFsO1xufVxuXG5sZXQgZW5kc1dpdGggPSAoZnVuY3Rpb24gKCkge1xuICAgIGlmIChTdHJpbmcucHJvdG90eXBlLmVuZHNXaXRoKSByZXR1cm4gU3RyaW5nLnByb3RvdHlwZS5lbmRzV2l0aDtcbiAgICByZXR1cm4gZnVuY3Rpb24gZW5kc1dpdGggKHNlYXJjaFN0cmluZywgcG9zaXRpb24pIHtcbiAgICAgICAgdmFyIHN1YmplY3RTdHJpbmcgPSB0aGlzLnRvU3RyaW5nKCk7XG4gICAgICAgIGlmIChwb3NpdGlvbiA9PT0gdW5kZWZpbmVkIHx8IHBvc2l0aW9uID4gc3ViamVjdFN0cmluZy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHBvc2l0aW9uID0gc3ViamVjdFN0cmluZy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgcG9zaXRpb24gLT0gc2VhcmNoU3RyaW5nLmxlbmd0aDtcbiAgICAgICAgdmFyIGxhc3RJbmRleCA9IHN1YmplY3RTdHJpbmcuaW5kZXhPZihzZWFyY2hTdHJpbmcsIHBvc2l0aW9uKTtcbiAgICAgICAgcmV0dXJuIGxhc3RJbmRleCAhPT0gLTEgJiYgbGFzdEluZGV4ID09PSBwb3NpdGlvbjtcbiAgICB9O1xufSkoKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ0VuZHNXaXRoKHN0cmluZywgc2VhcmNoKSB7XG4gICAgcmV0dXJuIGVuZHNXaXRoLmNhbGwoc3RyaW5nLCBzZWFyY2gpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGlkZUZsYXNoRWwoZWwpIHtcbiAgICAvLyBjYW4ndCB1c2UgZGlzcGxheSBub25lIG9yIHZpc2liaWxpdHkgbm9uZSBiZWNhdXNlIHdpbGwgYmxvY2sgZmxhc2ggaW4gc29tZSBicm93c2Vyc1xuICAgIGVsLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICBlbC5zdHlsZS5sZWZ0ID0gJy0xcHgnO1xuICAgIGVsLnN0eWxlLnRvcCA9ICctMXB4JztcbiAgICBlbC5zdHlsZS53aWR0aCA9ICcxcHgnO1xuICAgIGVsLnN0eWxlLmhlaWdodCA9ICcxcHgnO1xufVxuIiwiLypcdFNXRk9iamVjdCB2Mi4yIDxodHRwOi8vY29kZS5nb29nbGUuY29tL3Avc3dmb2JqZWN0Lz4gXG5cdGlzIHJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSA8aHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHA+IFxuKi9cbnZhciBzd2ZvYmplY3Q9ZnVuY3Rpb24oKXt2YXIgRD1cInVuZGVmaW5lZFwiLHI9XCJvYmplY3RcIixTPVwiU2hvY2t3YXZlIEZsYXNoXCIsVz1cIlNob2Nrd2F2ZUZsYXNoLlNob2Nrd2F2ZUZsYXNoXCIscT1cImFwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoXCIsUj1cIlNXRk9iamVjdEV4cHJJbnN0XCIseD1cIm9ucmVhZHlzdGF0ZWNoYW5nZVwiLE89d2luZG93LGo9ZG9jdW1lbnQsdD1uYXZpZ2F0b3IsVD1mYWxzZSxVPVtoXSxvPVtdLE49W10sST1bXSxsLFEsRSxCLEo9ZmFsc2UsYT1mYWxzZSxuLEcsbT10cnVlLE09ZnVuY3Rpb24oKXt2YXIgYWE9dHlwZW9mIGouZ2V0RWxlbWVudEJ5SWQhPUQmJnR5cGVvZiBqLmdldEVsZW1lbnRzQnlUYWdOYW1lIT1EJiZ0eXBlb2Ygai5jcmVhdGVFbGVtZW50IT1ELGFoPXQudXNlckFnZW50LnRvTG93ZXJDYXNlKCksWT10LnBsYXRmb3JtLnRvTG93ZXJDYXNlKCksYWU9WT8vd2luLy50ZXN0KFkpOi93aW4vLnRlc3QoYWgpLGFjPVk/L21hYy8udGVzdChZKTovbWFjLy50ZXN0KGFoKSxhZj0vd2Via2l0Ly50ZXN0KGFoKT9wYXJzZUZsb2F0KGFoLnJlcGxhY2UoL14uKndlYmtpdFxcLyhcXGQrKFxcLlxcZCspPykuKiQvLFwiJDFcIikpOmZhbHNlLFg9IStcIlxcdjFcIixhZz1bMCwwLDBdLGFiPW51bGw7aWYodHlwZW9mIHQucGx1Z2lucyE9RCYmdHlwZW9mIHQucGx1Z2luc1tTXT09cil7YWI9dC5wbHVnaW5zW1NdLmRlc2NyaXB0aW9uO2lmKGFiJiYhKHR5cGVvZiB0Lm1pbWVUeXBlcyE9RCYmdC5taW1lVHlwZXNbcV0mJiF0Lm1pbWVUeXBlc1txXS5lbmFibGVkUGx1Z2luKSl7VD10cnVlO1g9ZmFsc2U7YWI9YWIucmVwbGFjZSgvXi4qXFxzKyhcXFMrXFxzK1xcUyskKS8sXCIkMVwiKTthZ1swXT1wYXJzZUludChhYi5yZXBsYWNlKC9eKC4qKVxcLi4qJC8sXCIkMVwiKSwxMCk7YWdbMV09cGFyc2VJbnQoYWIucmVwbGFjZSgvXi4qXFwuKC4qKVxccy4qJC8sXCIkMVwiKSwxMCk7YWdbMl09L1thLXpBLVpdLy50ZXN0KGFiKT9wYXJzZUludChhYi5yZXBsYWNlKC9eLipbYS16QS1aXSsoLiopJC8sXCIkMVwiKSwxMCk6MH19ZWxzZXtpZih0eXBlb2YgT1soWydBY3RpdmUnXS5jb25jYXQoJ09iamVjdCcpLmpvaW4oJ1gnKSldIT1EKXt0cnl7dmFyIGFkPW5ldyB3aW5kb3dbKFsnQWN0aXZlJ10uY29uY2F0KCdPYmplY3QnKS5qb2luKCdYJykpXShXKTtpZihhZCl7YWI9YWQuR2V0VmFyaWFibGUoXCIkdmVyc2lvblwiKTtpZihhYil7WD10cnVlO2FiPWFiLnNwbGl0KFwiIFwiKVsxXS5zcGxpdChcIixcIik7YWc9W3BhcnNlSW50KGFiWzBdLDEwKSxwYXJzZUludChhYlsxXSwxMCkscGFyc2VJbnQoYWJbMl0sMTApXX19fWNhdGNoKFope319fXJldHVybnt3MzphYSxwdjphZyx3azphZixpZTpYLHdpbjphZSxtYWM6YWN9fSgpLGs9ZnVuY3Rpb24oKXtpZighTS53Myl7cmV0dXJufWlmKCh0eXBlb2Ygai5yZWFkeVN0YXRlIT1EJiZqLnJlYWR5U3RhdGU9PVwiY29tcGxldGVcIil8fCh0eXBlb2Ygai5yZWFkeVN0YXRlPT1EJiYoai5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF18fGouYm9keSkpKXtmKCl9aWYoIUope2lmKHR5cGVvZiBqLmFkZEV2ZW50TGlzdGVuZXIhPUQpe2ouYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixmLGZhbHNlKX1pZihNLmllJiZNLndpbil7ai5hdHRhY2hFdmVudCh4LGZ1bmN0aW9uKCl7aWYoai5yZWFkeVN0YXRlPT1cImNvbXBsZXRlXCIpe2ouZGV0YWNoRXZlbnQoeCxhcmd1bWVudHMuY2FsbGVlKTtmKCl9fSk7aWYoTz09dG9wKXsoZnVuY3Rpb24oKXtpZihKKXtyZXR1cm59dHJ5e2ouZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsKFwibGVmdFwiKX1jYXRjaChYKXtzZXRUaW1lb3V0KGFyZ3VtZW50cy5jYWxsZWUsMCk7cmV0dXJufWYoKX0pKCl9fWlmKE0ud2speyhmdW5jdGlvbigpe2lmKEope3JldHVybn1pZighL2xvYWRlZHxjb21wbGV0ZS8udGVzdChqLnJlYWR5U3RhdGUpKXtzZXRUaW1lb3V0KGFyZ3VtZW50cy5jYWxsZWUsMCk7cmV0dXJufWYoKX0pKCl9cyhmKX19KCk7ZnVuY3Rpb24gZigpe2lmKEope3JldHVybn10cnl7dmFyIFo9ai5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF0uYXBwZW5kQ2hpbGQoQyhcInNwYW5cIikpO1oucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChaKX1jYXRjaChhYSl7cmV0dXJufUo9dHJ1ZTt2YXIgWD1VLmxlbmd0aDtmb3IodmFyIFk9MDtZPFg7WSsrKXtVW1ldKCl9fWZ1bmN0aW9uIEsoWCl7aWYoSil7WCgpfWVsc2V7VVtVLmxlbmd0aF09WH19ZnVuY3Rpb24gcyhZKXtpZih0eXBlb2YgTy5hZGRFdmVudExpc3RlbmVyIT1EKXtPLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsWSxmYWxzZSl9ZWxzZXtpZih0eXBlb2Ygai5hZGRFdmVudExpc3RlbmVyIT1EKXtqLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsWSxmYWxzZSl9ZWxzZXtpZih0eXBlb2YgTy5hdHRhY2hFdmVudCE9RCl7aShPLFwib25sb2FkXCIsWSl9ZWxzZXtpZih0eXBlb2YgTy5vbmxvYWQ9PVwiZnVuY3Rpb25cIil7dmFyIFg9Ty5vbmxvYWQ7Ty5vbmxvYWQ9ZnVuY3Rpb24oKXtYKCk7WSgpfX1lbHNle08ub25sb2FkPVl9fX19fWZ1bmN0aW9uIGgoKXtpZihUKXtWKCl9ZWxzZXtIKCl9fWZ1bmN0aW9uIFYoKXt2YXIgWD1qLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXTt2YXIgYWE9QyhyKTthYS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIscSk7dmFyIFo9WC5hcHBlbmRDaGlsZChhYSk7aWYoWil7dmFyIFk9MDsoZnVuY3Rpb24oKXtpZih0eXBlb2YgWi5HZXRWYXJpYWJsZSE9RCl7dmFyIGFiPVouR2V0VmFyaWFibGUoXCIkdmVyc2lvblwiKTtpZihhYil7YWI9YWIuc3BsaXQoXCIgXCIpWzFdLnNwbGl0KFwiLFwiKTtNLnB2PVtwYXJzZUludChhYlswXSwxMCkscGFyc2VJbnQoYWJbMV0sMTApLHBhcnNlSW50KGFiWzJdLDEwKV19fWVsc2V7aWYoWTwxMCl7WSsrO3NldFRpbWVvdXQoYXJndW1lbnRzLmNhbGxlZSwxMCk7cmV0dXJufX1YLnJlbW92ZUNoaWxkKGFhKTtaPW51bGw7SCgpfSkoKX1lbHNle0goKX19ZnVuY3Rpb24gSCgpe3ZhciBhZz1vLmxlbmd0aDtpZihhZz4wKXtmb3IodmFyIGFmPTA7YWY8YWc7YWYrKyl7dmFyIFk9b1thZl0uaWQ7dmFyIGFiPW9bYWZdLmNhbGxiYWNrRm47dmFyIGFhPXtzdWNjZXNzOmZhbHNlLGlkOll9O2lmKE0ucHZbMF0+MCl7dmFyIGFlPWMoWSk7aWYoYWUpe2lmKEYob1thZl0uc3dmVmVyc2lvbikmJiEoTS53ayYmTS53azwzMTIpKXt3KFksdHJ1ZSk7aWYoYWIpe2FhLnN1Y2Nlc3M9dHJ1ZTthYS5yZWY9eihZKTthYihhYSl9fWVsc2V7aWYob1thZl0uZXhwcmVzc0luc3RhbGwmJkEoKSl7dmFyIGFpPXt9O2FpLmRhdGE9b1thZl0uZXhwcmVzc0luc3RhbGw7YWkud2lkdGg9YWUuZ2V0QXR0cmlidXRlKFwid2lkdGhcIil8fFwiMFwiO2FpLmhlaWdodD1hZS5nZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIil8fFwiMFwiO2lmKGFlLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpKXthaS5zdHlsZWNsYXNzPWFlLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfWlmKGFlLmdldEF0dHJpYnV0ZShcImFsaWduXCIpKXthaS5hbGlnbj1hZS5nZXRBdHRyaWJ1dGUoXCJhbGlnblwiKX12YXIgYWg9e307dmFyIFg9YWUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJwYXJhbVwiKTt2YXIgYWM9WC5sZW5ndGg7Zm9yKHZhciBhZD0wO2FkPGFjO2FkKyspe2lmKFhbYWRdLmdldEF0dHJpYnV0ZShcIm5hbWVcIikudG9Mb3dlckNhc2UoKSE9XCJtb3ZpZVwiKXthaFtYW2FkXS5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpXT1YW2FkXS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKX19UChhaSxhaCxZLGFiKX1lbHNle3AoYWUpO2lmKGFiKXthYihhYSl9fX19fWVsc2V7dyhZLHRydWUpO2lmKGFiKXt2YXIgWj16KFkpO2lmKFomJnR5cGVvZiBaLlNldFZhcmlhYmxlIT1EKXthYS5zdWNjZXNzPXRydWU7YWEucmVmPVp9YWIoYWEpfX19fX1mdW5jdGlvbiB6KGFhKXt2YXIgWD1udWxsO3ZhciBZPWMoYWEpO2lmKFkmJlkubm9kZU5hbWU9PVwiT0JKRUNUXCIpe2lmKHR5cGVvZiBZLlNldFZhcmlhYmxlIT1EKXtYPVl9ZWxzZXt2YXIgWj1ZLmdldEVsZW1lbnRzQnlUYWdOYW1lKHIpWzBdO2lmKFope1g9Wn19fXJldHVybiBYfWZ1bmN0aW9uIEEoKXtyZXR1cm4gIWEmJkYoXCI2LjAuNjVcIikmJihNLndpbnx8TS5tYWMpJiYhKE0ud2smJk0ud2s8MzEyKX1mdW5jdGlvbiBQKGFhLGFiLFgsWil7YT10cnVlO0U9Wnx8bnVsbDtCPXtzdWNjZXNzOmZhbHNlLGlkOlh9O3ZhciBhZT1jKFgpO2lmKGFlKXtpZihhZS5ub2RlTmFtZT09XCJPQkpFQ1RcIil7bD1nKGFlKTtRPW51bGx9ZWxzZXtsPWFlO1E9WH1hYS5pZD1SO2lmKHR5cGVvZiBhYS53aWR0aD09RHx8KCEvJSQvLnRlc3QoYWEud2lkdGgpJiZwYXJzZUludChhYS53aWR0aCwxMCk8MzEwKSl7YWEud2lkdGg9XCIzMTBcIn1pZih0eXBlb2YgYWEuaGVpZ2h0PT1EfHwoIS8lJC8udGVzdChhYS5oZWlnaHQpJiZwYXJzZUludChhYS5oZWlnaHQsMTApPDEzNykpe2FhLmhlaWdodD1cIjEzN1wifWoudGl0bGU9ai50aXRsZS5zbGljZSgwLDQ3KStcIiAtIEZsYXNoIFBsYXllciBJbnN0YWxsYXRpb25cIjt2YXIgYWQ9TS5pZSYmTS53aW4/KFsnQWN0aXZlJ10uY29uY2F0KCcnKS5qb2luKCdYJykpOlwiUGx1Z0luXCIsYWM9XCJNTXJlZGlyZWN0VVJMPVwiK08ubG9jYXRpb24udG9TdHJpbmcoKS5yZXBsYWNlKC8mL2csXCIlMjZcIikrXCImTU1wbGF5ZXJUeXBlPVwiK2FkK1wiJk1NZG9jdGl0bGU9XCIrai50aXRsZTtpZih0eXBlb2YgYWIuZmxhc2h2YXJzIT1EKXthYi5mbGFzaHZhcnMrPVwiJlwiK2FjfWVsc2V7YWIuZmxhc2h2YXJzPWFjfWlmKE0uaWUmJk0ud2luJiZhZS5yZWFkeVN0YXRlIT00KXt2YXIgWT1DKFwiZGl2XCIpO1grPVwiU1dGT2JqZWN0TmV3XCI7WS5zZXRBdHRyaWJ1dGUoXCJpZFwiLFgpO2FlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKFksYWUpO2FlLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7KGZ1bmN0aW9uKCl7aWYoYWUucmVhZHlTdGF0ZT09NCl7YWUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhZSl9ZWxzZXtzZXRUaW1lb3V0KGFyZ3VtZW50cy5jYWxsZWUsMTApfX0pKCl9dShhYSxhYixYKX19ZnVuY3Rpb24gcChZKXtpZihNLmllJiZNLndpbiYmWS5yZWFkeVN0YXRlIT00KXt2YXIgWD1DKFwiZGl2XCIpO1kucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoWCxZKTtYLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGcoWSksWCk7WS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiOyhmdW5jdGlvbigpe2lmKFkucmVhZHlTdGF0ZT09NCl7WS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKFkpfWVsc2V7c2V0VGltZW91dChhcmd1bWVudHMuY2FsbGVlLDEwKX19KSgpfWVsc2V7WS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChnKFkpLFkpfX1mdW5jdGlvbiBnKGFiKXt2YXIgYWE9QyhcImRpdlwiKTtpZihNLndpbiYmTS5pZSl7YWEuaW5uZXJIVE1MPWFiLmlubmVySFRNTH1lbHNle3ZhciBZPWFiLmdldEVsZW1lbnRzQnlUYWdOYW1lKHIpWzBdO2lmKFkpe3ZhciBhZD1ZLmNoaWxkTm9kZXM7aWYoYWQpe3ZhciBYPWFkLmxlbmd0aDtmb3IodmFyIFo9MDtaPFg7WisrKXtpZighKGFkW1pdLm5vZGVUeXBlPT0xJiZhZFtaXS5ub2RlTmFtZT09XCJQQVJBTVwiKSYmIShhZFtaXS5ub2RlVHlwZT09OCkpe2FhLmFwcGVuZENoaWxkKGFkW1pdLmNsb25lTm9kZSh0cnVlKSl9fX19fXJldHVybiBhYX1mdW5jdGlvbiB1KGFpLGFnLFkpe3ZhciBYLGFhPWMoWSk7aWYoTS53ayYmTS53azwzMTIpe3JldHVybiBYfWlmKGFhKXtpZih0eXBlb2YgYWkuaWQ9PUQpe2FpLmlkPVl9aWYoTS5pZSYmTS53aW4pe3ZhciBhaD1cIlwiO2Zvcih2YXIgYWUgaW4gYWkpe2lmKGFpW2FlXSE9T2JqZWN0LnByb3RvdHlwZVthZV0pe2lmKGFlLnRvTG93ZXJDYXNlKCk9PVwiZGF0YVwiKXthZy5tb3ZpZT1haVthZV19ZWxzZXtpZihhZS50b0xvd2VyQ2FzZSgpPT1cInN0eWxlY2xhc3NcIil7YWgrPScgY2xhc3M9XCInK2FpW2FlXSsnXCInfWVsc2V7aWYoYWUudG9Mb3dlckNhc2UoKSE9XCJjbGFzc2lkXCIpe2FoKz1cIiBcIithZSsnPVwiJythaVthZV0rJ1wiJ319fX19dmFyIGFmPVwiXCI7Zm9yKHZhciBhZCBpbiBhZyl7aWYoYWdbYWRdIT1PYmplY3QucHJvdG90eXBlW2FkXSl7YWYrPSc8cGFyYW0gbmFtZT1cIicrYWQrJ1wiIHZhbHVlPVwiJythZ1thZF0rJ1wiIC8+J319YWEub3V0ZXJIVE1MPSc8b2JqZWN0IGNsYXNzaWQ9XCJjbHNpZDpEMjdDREI2RS1BRTZELTExY2YtOTZCOC00NDQ1NTM1NDAwMDBcIicrYWgrXCI+XCIrYWYrXCI8L29iamVjdD5cIjtOW04ubGVuZ3RoXT1haS5pZDtYPWMoYWkuaWQpfWVsc2V7dmFyIFo9QyhyKTtaLnNldEF0dHJpYnV0ZShcInR5cGVcIixxKTtmb3IodmFyIGFjIGluIGFpKXtpZihhaVthY10hPU9iamVjdC5wcm90b3R5cGVbYWNdKXtpZihhYy50b0xvd2VyQ2FzZSgpPT1cInN0eWxlY2xhc3NcIil7Wi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLGFpW2FjXSl9ZWxzZXtpZihhYy50b0xvd2VyQ2FzZSgpIT1cImNsYXNzaWRcIil7Wi5zZXRBdHRyaWJ1dGUoYWMsYWlbYWNdKX19fX1mb3IodmFyIGFiIGluIGFnKXtpZihhZ1thYl0hPU9iamVjdC5wcm90b3R5cGVbYWJdJiZhYi50b0xvd2VyQ2FzZSgpIT1cIm1vdmllXCIpe2UoWixhYixhZ1thYl0pfX1hYS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChaLGFhKTtYPVp9fXJldHVybiBYfWZ1bmN0aW9uIGUoWixYLFkpe3ZhciBhYT1DKFwicGFyYW1cIik7YWEuc2V0QXR0cmlidXRlKFwibmFtZVwiLFgpO2FhLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsWSk7Wi5hcHBlbmRDaGlsZChhYSl9ZnVuY3Rpb24geShZKXt2YXIgWD1jKFkpO2lmKFgmJlgubm9kZU5hbWU9PVwiT0JKRUNUXCIpe2lmKE0uaWUmJk0ud2luKXtYLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7KGZ1bmN0aW9uKCl7aWYoWC5yZWFkeVN0YXRlPT00KXtiKFkpfWVsc2V7c2V0VGltZW91dChhcmd1bWVudHMuY2FsbGVlLDEwKX19KSgpfWVsc2V7WC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKFgpfX19ZnVuY3Rpb24gYihaKXt2YXIgWT1jKFopO2lmKFkpe2Zvcih2YXIgWCBpbiBZKXtpZih0eXBlb2YgWVtYXT09XCJmdW5jdGlvblwiKXtZW1hdPW51bGx9fVkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChZKX19ZnVuY3Rpb24gYyhaKXt2YXIgWD1udWxsO3RyeXtYPWouZ2V0RWxlbWVudEJ5SWQoWil9Y2F0Y2goWSl7fXJldHVybiBYfWZ1bmN0aW9uIEMoWCl7cmV0dXJuIGouY3JlYXRlRWxlbWVudChYKX1mdW5jdGlvbiBpKFosWCxZKXtaLmF0dGFjaEV2ZW50KFgsWSk7SVtJLmxlbmd0aF09W1osWCxZXX1mdW5jdGlvbiBGKFope3ZhciBZPU0ucHYsWD1aLnNwbGl0KFwiLlwiKTtYWzBdPXBhcnNlSW50KFhbMF0sMTApO1hbMV09cGFyc2VJbnQoWFsxXSwxMCl8fDA7WFsyXT1wYXJzZUludChYWzJdLDEwKXx8MDtyZXR1cm4oWVswXT5YWzBdfHwoWVswXT09WFswXSYmWVsxXT5YWzFdKXx8KFlbMF09PVhbMF0mJllbMV09PVhbMV0mJllbMl0+PVhbMl0pKT90cnVlOmZhbHNlfWZ1bmN0aW9uIHYoYWMsWSxhZCxhYil7aWYoTS5pZSYmTS5tYWMpe3JldHVybn12YXIgYWE9ai5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07aWYoIWFhKXtyZXR1cm59dmFyIFg9KGFkJiZ0eXBlb2YgYWQ9PVwic3RyaW5nXCIpP2FkOlwic2NyZWVuXCI7aWYoYWIpe249bnVsbDtHPW51bGx9aWYoIW58fEchPVgpe3ZhciBaPUMoXCJzdHlsZVwiKTtaLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInRleHQvY3NzXCIpO1ouc2V0QXR0cmlidXRlKFwibWVkaWFcIixYKTtuPWFhLmFwcGVuZENoaWxkKFopO2lmKE0uaWUmJk0ud2luJiZ0eXBlb2Ygai5zdHlsZVNoZWV0cyE9RCYmai5zdHlsZVNoZWV0cy5sZW5ndGg+MCl7bj1qLnN0eWxlU2hlZXRzW2ouc3R5bGVTaGVldHMubGVuZ3RoLTFdfUc9WH1pZihNLmllJiZNLndpbil7aWYobiYmdHlwZW9mIG4uYWRkUnVsZT09cil7bi5hZGRSdWxlKGFjLFkpfX1lbHNle2lmKG4mJnR5cGVvZiBqLmNyZWF0ZVRleHROb2RlIT1EKXtuLmFwcGVuZENoaWxkKGouY3JlYXRlVGV4dE5vZGUoYWMrXCIge1wiK1krXCJ9XCIpKX19fWZ1bmN0aW9uIHcoWixYKXtpZighbSl7cmV0dXJufXZhciBZPVg/XCJ2aXNpYmxlXCI6XCJoaWRkZW5cIjtpZihKJiZjKFopKXtjKFopLnN0eWxlLnZpc2liaWxpdHk9WX1lbHNle3YoXCIjXCIrWixcInZpc2liaWxpdHk6XCIrWSl9fWZ1bmN0aW9uIEwoWSl7dmFyIFo9L1tcXFxcXFxcIjw+XFwuO10vO3ZhciBYPVouZXhlYyhZKSE9bnVsbDtyZXR1cm4gWCYmdHlwZW9mIGVuY29kZVVSSUNvbXBvbmVudCE9RD9lbmNvZGVVUklDb21wb25lbnQoWSk6WX12YXIgZD1mdW5jdGlvbigpe2lmKE0uaWUmJk0ud2luKXt3aW5kb3cuYXR0YWNoRXZlbnQoXCJvbnVubG9hZFwiLGZ1bmN0aW9uKCl7dmFyIGFjPUkubGVuZ3RoO2Zvcih2YXIgYWI9MDthYjxhYzthYisrKXtJW2FiXVswXS5kZXRhY2hFdmVudChJW2FiXVsxXSxJW2FiXVsyXSl9dmFyIFo9Ti5sZW5ndGg7Zm9yKHZhciBhYT0wO2FhPFo7YWErKyl7eShOW2FhXSl9Zm9yKHZhciBZIGluIE0pe01bWV09bnVsbH1NPW51bGw7Zm9yKHZhciBYIGluIHN3Zm9iamVjdCl7c3dmb2JqZWN0W1hdPW51bGx9c3dmb2JqZWN0PW51bGx9KX19KCk7cmV0dXJue3JlZ2lzdGVyT2JqZWN0OmZ1bmN0aW9uKGFiLFgsYWEsWil7aWYoTS53MyYmYWImJlgpe3ZhciBZPXt9O1kuaWQ9YWI7WS5zd2ZWZXJzaW9uPVg7WS5leHByZXNzSW5zdGFsbD1hYTtZLmNhbGxiYWNrRm49WjtvW28ubGVuZ3RoXT1ZO3coYWIsZmFsc2UpfWVsc2V7aWYoWil7Wih7c3VjY2VzczpmYWxzZSxpZDphYn0pfX19LGdldE9iamVjdEJ5SWQ6ZnVuY3Rpb24oWCl7aWYoTS53Myl7cmV0dXJuIHooWCl9fSxlbWJlZFNXRjpmdW5jdGlvbihhYixhaCxhZSxhZyxZLGFhLFosYWQsYWYsYWMpe3ZhciBYPXtzdWNjZXNzOmZhbHNlLGlkOmFofTtpZihNLnczJiYhKE0ud2smJk0ud2s8MzEyKSYmYWImJmFoJiZhZSYmYWcmJlkpe3coYWgsZmFsc2UpO0soZnVuY3Rpb24oKXthZSs9XCJcIjthZys9XCJcIjt2YXIgYWo9e307aWYoYWYmJnR5cGVvZiBhZj09PXIpe2Zvcih2YXIgYWwgaW4gYWYpe2FqW2FsXT1hZlthbF19fWFqLmRhdGE9YWI7YWoud2lkdGg9YWU7YWouaGVpZ2h0PWFnO3ZhciBhbT17fTtpZihhZCYmdHlwZW9mIGFkPT09cil7Zm9yKHZhciBhayBpbiBhZCl7YW1bYWtdPWFkW2FrXX19aWYoWiYmdHlwZW9mIFo9PT1yKXtmb3IodmFyIGFpIGluIFope2lmKHR5cGVvZiBhbS5mbGFzaHZhcnMhPUQpe2FtLmZsYXNodmFycys9XCImXCIrYWkrXCI9XCIrWlthaV19ZWxzZXthbS5mbGFzaHZhcnM9YWkrXCI9XCIrWlthaV19fX1pZihGKFkpKXt2YXIgYW49dShhaixhbSxhaCk7aWYoYWouaWQ9PWFoKXt3KGFoLHRydWUpfVguc3VjY2Vzcz10cnVlO1gucmVmPWFufWVsc2V7aWYoYWEmJkEoKSl7YWouZGF0YT1hYTtQKGFqLGFtLGFoLGFjKTtyZXR1cm59ZWxzZXt3KGFoLHRydWUpfX1pZihhYyl7YWMoWCl9fSl9ZWxzZXtpZihhYyl7YWMoWCl9fX0sc3dpdGNoT2ZmQXV0b0hpZGVTaG93OmZ1bmN0aW9uKCl7bT1mYWxzZX0sdWE6TSxnZXRGbGFzaFBsYXllclZlcnNpb246ZnVuY3Rpb24oKXtyZXR1cm57bWFqb3I6TS5wdlswXSxtaW5vcjpNLnB2WzFdLHJlbGVhc2U6TS5wdlsyXX19LGhhc0ZsYXNoUGxheWVyVmVyc2lvbjpGLGNyZWF0ZVNXRjpmdW5jdGlvbihaLFksWCl7aWYoTS53Myl7cmV0dXJuIHUoWixZLFgpfWVsc2V7cmV0dXJuIHVuZGVmaW5lZH19LHNob3dFeHByZXNzSW5zdGFsbDpmdW5jdGlvbihaLGFhLFgsWSl7aWYoTS53MyYmQSgpKXtQKFosYWEsWCxZKX19LHJlbW92ZVNXRjpmdW5jdGlvbihYKXtpZihNLnczKXt5KFgpfX0sY3JlYXRlQ1NTOmZ1bmN0aW9uKGFhLFosWSxYKXtpZihNLnczKXt2KGFhLFosWSxYKX19LGFkZERvbUxvYWRFdmVudDpLLGFkZExvYWRFdmVudDpzLGdldFF1ZXJ5UGFyYW1WYWx1ZTpmdW5jdGlvbihhYSl7dmFyIFo9ai5sb2NhdGlvbi5zZWFyY2h8fGoubG9jYXRpb24uaGFzaDtpZihaKXtpZigvXFw/Ly50ZXN0KFopKXtaPVouc3BsaXQoXCI/XCIpWzFdfWlmKGFhPT1udWxsKXtyZXR1cm4gTChaKX12YXIgWT1aLnNwbGl0KFwiJlwiKTtmb3IodmFyIFg9MDtYPFkubGVuZ3RoO1grKyl7aWYoWVtYXS5zdWJzdHJpbmcoMCxZW1hdLmluZGV4T2YoXCI9XCIpKT09YWEpe3JldHVybiBMKFlbWF0uc3Vic3RyaW5nKChZW1hdLmluZGV4T2YoXCI9XCIpKzEpKSl9fX1yZXR1cm5cIlwifSxleHByZXNzSW5zdGFsbENhbGxiYWNrOmZ1bmN0aW9uKCl7aWYoYSl7dmFyIFg9YyhSKTtpZihYJiZsKXtYLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGwsWCk7aWYoUSl7dyhRLHRydWUpO2lmKE0uaWUmJk0ud2luKXtsLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wifX1pZihFKXtFKEIpfX1hPWZhbHNlfX19fSgpO21vZHVsZS5leHBvcnRzPXN3Zm9iamVjdDtcbiJdfQ=="}